/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={6099:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r,o,i=n(655),a=n(4589),s=n(909),c=n(4594),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),u=new a.LL("app","Firebase",l),d="@firebase/app",p="[DEFAULT]",h=((o={})[d]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/app-check"]="fire-app-check",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),f=new c.Yd("@firebase/app"),m=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(e),this.container=new s.H0(t.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=p),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=p),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){f.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{appName:this.name_})},e}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var v=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={}),"object"==typeof o&&null!==o||(o={name:o});var i=o;void 0===i.name&&(i.name=p);var s=i.name;if("string"!=typeof s||!s)throw u.create("bad-app-name",{appName:String(s)});if((0,a.r3)(t,s))throw u.create("duplicate-app",{appName:s});var c=new e(n,i,r);return t[s]=c,c},app:o,registerVersion:function(e,t,n){var r,o=null!==(r=h[e])&&void 0!==r?r:e;n&&(o+="-"+n);var a=o.match(/\s|\//),c=t.match(/\s|\//);if(a||c){var l=['Unable to register library "'+o+'" with version "'+t+'":'];return a&&l.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),a&&c&&l.push("and"),c&&l.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void f.warn(l.join(" "))}i(new s.wA(o+"-version",(function(){return{library:o,version:t}}),"VERSION"))},setLogLevel:c.Ub,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw u.create("invalid-log-argument");(0,c.Am)(e,t)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:i,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function o(e){if(e=e||p,!(0,a.r3)(t,e))throw u.create("no-app",{appName:e});return t[e]}function i(i){var s=i.name;if(n.has(s))return f.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===i.type?r[s]:null;if(n.set(s,i),"PUBLIC"===i.type){var c=function(e){if(void 0===e&&(e=o()),"function"!=typeof e[s])throw u.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==i.serviceProps&&(0,a.ZB)(c,i.serviceProps),r[s]=c,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,i.multipleInstances?e:[])}}for(var l=0,d=Object.keys(t);l<d.length;l++){var p=d[l];t[p]._addComponent(i)}return"PUBLIC"===i.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),o.App=e,r}(m);return t.INTERNAL=(0,i.pi)((0,i.pi)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,a.ZB)(t,e)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),t}(),g=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if((0,a.jU)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.UG)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,e)};var b=v;!function(e,t){e.INTERNAL.registerComponent(new s.wA("platform-logger",(function(e){return new g(e)}),"PRIVATE")),e.registerVersion(d,"0.6.29",void 0),e.registerVersion("fire-js","")}(b);const C=b},909:(e,t,n)=>{"use strict";n.d(t,{wA:()=>i,H0:()=>c,zt:()=>s});var r=n(655),o=n(4589),i=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new o.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:a})}catch(e){}try{for(var o=(0,r.XA)(this.instancesDeferred.entries()),i=o.next();!i.done;i=o.next()){var s=(0,r.CR)(i.value,2),c=s[0],l=s[1],u=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:u});l.resolve(d)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),(0,r.CR)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var o=e.options,i=void 0===o?{}:o,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:i});try{for(var c=(0,r.XA)(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var u=(0,r.CR)(l.value,2),d=u[0],p=u[1];a===this.normalizeInstanceIdentifier(d)&&p.resolve(s)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return s},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);var i=this.instances.get(r);return i&&e(i,r),function(){o.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,o,i=this.onInitCallbacks.get(t);if(i)try{for(var a=(0,r.XA)(i),s=a.next();!s.done;s=a.next()){var c=s.value;try{c(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,o=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===a?void 0:t),options:o}),this.instances.set(n,i),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(e){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=a),this.component?this.component.multipleInstances?e:a:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},9446:(e,t,n)=>{"use strict";var r=n(6099),o=n(909),i=n(4589),a=n(655),s=n(4594);e=n.hmd(e);var c="";function l(e){c=e}var u,d=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,i.Pz)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,i.cI)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),p=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,i.r3)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),h=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new d(t)}}catch(e){}return new p},f=h("localStorage"),m=h("sessionStorage"),v=new s.Yd("@firebase/database"),g=(u=1,function(){return u++}),y=function(e){var t=(0,i.dS)(e),n=new i.gQ;n.update(t);var r=n.digest();return i.US.encodeByteArray(r)},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var o=e[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=_.apply(null,o):n+="object"==typeof o?(0,i.Pz)(o):o,n+=" "}return n},b=null,C=!0,E=function(e,t){(0,i.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(v.logLevel=s.in.VERBOSE,b=v.log.bind(v),t&&m.set("logging_enabled",!0)):"function"==typeof e?b=e:(b=null,m.remove("logging_enabled"))},w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===C&&(C=!1,null===b&&!0===m.get("logging_enabled")&&E(!0)),b){var n=_.apply(null,e);b(n)}},x=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];w.apply(void 0,(0,a.ev)([e],(0,a.CR)(t)))}},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,a.ev)([],(0,a.CR)(e)));v.error(n)},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,a.ev)([],(0,a.CR)(e)));throw v.error(n),new Error(n)},N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+_.apply(void 0,(0,a.ev)([],(0,a.CR)(e)));v.warn(n)},T=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",A="[MAX_NAME]",P=function(e,t){if(e===t)return 0;if(e===I||t===A)return-1;if(t===I||e===A)return 1;var n=W(e),r=W(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},L=function(e,t){return e===t?0:e<t?-1:1},R=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,i.Pz)(t))},D=function(e){if("object"!=typeof e||null===e)return(0,i.Pz)(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",o=0;o<t.length;o++)0!==o&&(r+=","),r+=(0,i.Pz)(t[o]),r+=":",r+=D(e[t[o]]);return r+"}"},O=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],o=0;o<n;o+=t)o+t>n?r.push(e.substring(o,n)):r.push(e.substring(o,o+t));return r};function q(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var M=function(e){(0,i.hu)(!T(e),"Invalid JSON number");var t,n,r,o,a;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var c=s.join(""),l="";for(a=0;a<64;a+=8){var u=parseInt(c.substr(a,8),2).toString(16);1===u.length&&(u="0"+u),l+=u}return l.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),W=function(e){if(F.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},j=function(e){try{e()}catch(e){setTimeout((function(){var t=e.stack||"";throw N("Exception was thrown by user callback.",t),e}),Math.floor(0))}},z=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){N('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),B=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',N(e)},e}(),$=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,V="websocket",G="long_polling",Y=function(){function e(e,t,n,r,o,i,a){void 0===o&&(o=!1),void 0===i&&(i=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=i,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function Q(e,t,n){var r;if((0,i.hu)("string"==typeof t,"typeof type must == string"),(0,i.hu)("object"==typeof n,"typeof params must == object"),t===V)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==G)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var o=[];return q(n,(function(e,t){o.push(e+"="+t)})),r+o.join("&")}var K=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,i.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,i.p$)(this.counters_)},e}(),Z={},J={};function X(e){var t=e.toString();return Z[t]||(Z[t]=new K),Z[t]}var ee=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var t=function(t){e[t]&&j((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},e}(),te="start",ne="close",re=function(){function e(e,t,n,r,o,i,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.transportSessionId=i,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x(e),this.stats_=X(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),Q(t,G,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,i.Yr)()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new oe((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,a.CR)(e,5),o=r[0],i=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===te)n.id=i,n.password=s;else{if(o!==ne)throw new Error("Unrecognized command received: "+o);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,a.CR)(e,2),o=r[0],i=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(o,i)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!((0,i.Yr)()||!e.forceAllow_&&(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,i.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,i.h$)(t),r=O(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,i.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,i.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),oe=function(){function e(t,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,i.Yr)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(e){w("frame writing exception"),e.stack&&w(e.stack),w(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||w("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var o=this.pendingSegs.shift();n=n+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(o),r()}))},e.prototype.addTag=function(e,t){var n=this;(0,i.Yr)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){w("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}}),Math.floor(1))},e}(),ie=null;"undefined"!=typeof MozWebSocket?ie=MozWebSocket:"undefined"!=typeof WebSocket&&(ie=WebSocket);var ae=function(){function e(t,n,r,o,i,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x(this.connId),this.stats_=X(n),this.connURL=e.connectionURL_(n,a,s,o),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var o={v:"5"};return!(0,i.Yr)()&&"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o.ac=r),Q(e,V,o)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if((0,i.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+c+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(o.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a=process.env,s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new ie(this.connURL,[],o)}else o={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}},this.mySock=new ie(this.connURL,[],o)}catch(e){this.log_("Error instantiating WebSocket.");var l=e.message||e.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==ie&&!e.forceDisallow_},e.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,i.cI)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,i.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,i.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=O(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),se=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[re,ae]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,o=ae&&ae.isAvailable(),i=o&&!ae.previouslyFailed();if(t.webSocketOnly&&(o||N("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ae];else{var s=this.transports_=[];try{for(var c=(0,a.XA)(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var u=l.value;u&&u.isAvailable()&&s.push(u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),ce=function(){function e(e,t,n,r,o,i,a,s,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=i,this.onReady_=a,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x("c:"+this.id+":"),this.transportManager_=new se(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=z((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(o)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=R("t",e),n=R("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=R("t",e),n=R("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=R("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?k("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&N("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),z((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),le=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),ue=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,i.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=(0,a.ev)([],(0,a.CR)(this.listeners_[e])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],o=0;o<r.length;o++)if(r[o].callback===t&&(!n||n===r[o].context))return void r.splice(o,1)},e.prototype.validateEventType_=function(e){(0,i.hu)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),de=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,i.uI)()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return(0,a.ZT)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,i.hu)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(ue),pe=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function he(){return new pe("")}function fe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function me(e){return e.pieces_.length-e.pieceNum_}function ve(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new pe(e.pieces_,t)}function ge(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ye(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function _e(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new pe(t,0)}function be(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof pe)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var o=t.split("/");for(r=0;r<o.length;r++)o[r].length>0&&n.push(o[r])}return new pe(n,0)}function Ce(e){return e.pieceNum_>=e.pieces_.length}function Ee(e,t){var n=fe(e),r=fe(t);if(null===n)return t;if(n===r)return Ee(ve(e),ve(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function we(e,t){for(var n=ye(e,0),r=ye(t,0),o=0;o<n.length&&o<r.length;o++){var i=P(n[o],r[o]);if(0!==i)return i}return n.length===r.length?0:n.length<r.length?-1:1}function xe(e,t){if(me(e)!==me(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ke(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(me(e)>me(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Se=function(e,t){this.errorPrefix_=t,this.parts_=ye(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,i.ug)(this.parts_[n]);Ne(this)};function Ne(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Te(e))}function Te(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ie,Ae,Pe=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return(0,a.ZT)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,i.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(ue),Le=1e3,Re=function(e){function t(n,r,o,a,s,c,l,u){var d=e.call(this)||this;if(d.repoInfo_=n,d.applicationId_=r,d.onDataUpdate_=o,d.onConnectStatus_=a,d.onServerInfoUpdate_=s,d.authTokenProvider_=c,d.appCheckTokenProvider_=l,d.authOverride_=u,d.id=t.nextPersistentConnectionId_++,d.log_=x("p:"+d.id+":"),d.interruptReasons_={},d.listens=new Map,d.outstandingPuts_=[],d.outstandingGets_=[],d.outstandingPutCount_=0,d.outstandingGetCount_=0,d.onDisconnectRequestQueue_=[],d.connected_=!1,d.reconnectDelay_=Le,d.maxReconnectDelay_=3e5,d.securityDebugCallback_=null,d.lastSessionId=null,d.establishConnectionTimer_=null,d.visible_=!1,d.requestCBHash_={},d.requestNumber_=0,d.realtime_=null,d.authToken_=null,d.appCheckToken_=null,d.forceTokenRefresh_=!1,d.invalidAuthTokenCount_=0,d.invalidAppCheckTokenCount_=0,d.firstConnection_=!0,d.lastConnectionAttemptTime_=null,d.lastConnectionEstablishedTime_=null,u&&!(0,i.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pe.getInstance().on("visible",d.onVisible_,d),-1===n.host.indexOf("fblocal")&&de.getInstance().on("online",d.onOnline_,d),d}return(0,a.ZT)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,o={r,a:e,b:t};this.log_((0,i.Pz)(o)),(0,i.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new i.BH,r={p:e._path.toString(),q:e._queryObject},o={action:"g",request:r,onComplete:function(e){var o=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,o,!1,null),n.resolve(o)):n.reject(o)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&o===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,i.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,i.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(o,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,o=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+o+" for "+i);var a={p:o};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,c=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(o)&&n.listens.get(o).get(i))===e&&(n.log_("listen response",a),"ok"!==c&&n.removeListen_(o,i),e.onComplete&&e.onComplete(c,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&(0,i.r3)(e,"w")){var n=(0,i.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();N("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,i.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,i.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,o=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,o))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,i.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var o={p:e};r&&(o.q=n,o.t=r),this.sendRequest("n",o)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var o={p:t,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,o){this.initConnection_();var i={p:t,d:n};void 0!==o&&(i.h=o),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),o&&o(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,i.Pz)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):k("Unrecognized action received from server: "+(0,i.Pz)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,i.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Le,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Le,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Le),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return(0,a.mG)(this,void 0,void 0,(function(){var e,n,r,o,s,c,l,u,d,p,h,f,m,v,g=this;return(0,a.Jh)(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,c=!1,l=null,u=function(){l?l.close():(c=!0,r())},d=function(e){(0,i.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:u,sendRequest:d},p=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)])];case 2:return h=a.CR.apply(void 0,[y.sent(),2]),f=h[0],m=h[1],c?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=m&&m.token,l=new ce(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){N(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),s)),[3,4];case 3:return v=y.sent(),this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&N(v),u()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){w("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){w("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,i.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Le,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return D(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new pe(e).toString();if(this.listens.has(r)){var o=this.listens.get(r);n=o.get(t),o.delete(t),0===o.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){w("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){w("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var o=(0,a.XA)(this.listens.values()),i=o.next();!i.done;i=o.next()){var s=i.value;try{for(var c=(n=void 0,(0,a.XA)(s.values())),l=c.next();!l.done;l=c.next()){var u=l.value;this.sendListen_(u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}for(var d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){var p=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(p.action,p.pathString,p.data,p.onComplete)}for(d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,i.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+c.replace(/\./g,"-")]=1,(0,i.uI)()?e["framework.cordova"]=1:(0,i.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=de.getInstance().currentlyOnline();return(0,i.xb)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(le),De=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Oe=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new De(I,e),r=new De(I,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return De.MIN},e}(),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Ie},set:function(e){Ie=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return P(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,i.g5)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return De.MIN},t.prototype.maxPost=function(){return new De(A,Ie)},t.prototype.makePost=function(e,t){return(0,i.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new De(e,Ie)},t.prototype.toString=function(){return".key"},t}(Oe),Me=new qe,Fe=function(){function e(e,t,n,r,o){void 0===o&&(o=null),this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];for(var i=1;!e.isEmpty();)if(e=e,i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),We=function(){function e(t,n,r,o,i){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=o?o:ze.EMPTY_NODE,this.right=null!=i?i:ze.EMPTY_NODE}return e.prototype.copy=function(t,n,r,o,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=i?i:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,o=n(e,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return ze.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ze.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),je=function(){function e(){}return e.prototype.copy=function(e,t,n,r,o){return this},e.prototype.insert=function(e,t,n){return new We(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),ze=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,We.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,We.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Fe(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Fe(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Fe(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Fe(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new je,e}();function Ue(e,t){return P(e.name,t.name)}function Be(e,t){return P(e,t)}var $e,He,Ve,Ge,Ye,Qe=function(e){return"number"==typeof e?"number:"+M(e):"string:"+e},Ke=function(e){if(e.isLeafNode()){var t=e.val();(0,i.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,i.r3)(t,".sv"),"Priority must be a string or number.")}else(0,i.hu)(e===Ae||e.isEmpty(),"priority of unexpected type.");(0,i.hu)(e===Ae||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ze=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,i.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ke(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return $e},set:function(e){$e=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return Ce(t)?this:".priority"===fe(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=fe(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,i.hu)(".priority"!==r||1===me(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Qe(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?M(this.value_):this.value_,this.lazyHash_=y(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,i.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return(0,i.hu)(o>=0,"Unknown leaf type: "+n),(0,i.hu)(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),Je=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),o=n.compareTo(r);return 0===o?P(e.name,t.name):o},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return De.MIN},t.prototype.maxPost=function(){return new De(A,new Ze("[PRIORITY-POST]",Ve))},t.prototype.makePost=function(e,t){var n=He(e);return new De(t,new Ze("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Oe)),Xe=Math.log(2),et=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Xe,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),tt=function(e,t,n,r){e.sort(t);var o=function(t,r){var i,a,s=r-t;if(0===s)return null;if(1===s)return i=e[t],a=n?n(i):i,new We(a,i.node,We.BLACK,null,null);var c=parseInt(s/2,10)+t,l=o(t,c),u=o(c+1,r);return i=e[c],a=n?n(i):i,new We(a,i.node,We.BLACK,l,u)},i=function(t){for(var r=null,i=null,a=e.length,s=function(t,r){var i=a-t,s=a;a-=t;var l=o(i+1,s),u=e[i],d=n?n(u):u;c(new We(d,u.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(i=e,r=e)},l=0;l<t.count;++l){var u=t.nextBitIsOne(),d=Math.pow(2,t.count-(l+1));u?s(d,We.BLACK):(s(d,We.BLACK),s(d,We.RED))}return i}(new et(e.length));return new ze(r||t,i)},nt={},rt=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,i.hu)(nt&&Je,"ChildrenNode.ts has not been loaded"),Ge=Ge||new e({".priority":nt},{".priority":Je})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,i.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ze?t:null},e.prototype.hasIndex=function(e){return(0,i.r3)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,i.hu)(t!==Me,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,o=[],s=!1,c=n.getIterator(De.Wrap),l=c.getNext();l;)s=s||t.isDefinedOn(l.node),o.push(l),l=c.getNext();r=s?tt(o,t.getCompare()):nt;var u=t.toString(),d=(0,a.pi)({},this.indexSet_);d[u]=t;var p=(0,a.pi)({},this.indexes_);return p[u]=r,new e(p,d)},e.prototype.addToIndexes=function(t,n){var r=this;return new e((0,i.UI)(this.indexes_,(function(e,o){var a=(0,i.DV)(r.indexSet_,o);if((0,i.hu)(a,"Missing index implementation for "+o),e===nt){if(a.isDefinedOn(t.node)){for(var s=[],c=n.getIterator(De.Wrap),l=c.getNext();l;)l.name!==t.name&&s.push(l),l=c.getNext();return s.push(t),tt(s,a.getCompare())}return nt}var u=n.get(t.name),d=e;return u&&(d=d.remove(new De(t.name,u))),d.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,i.UI)(this.indexes_,(function(e){if(e===nt)return e;var r=n.get(t.name);return r?e.remove(new De(t.name,r)):e})),this.indexSet_)},e}(),ot=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ke(this.priorityNode_),this.children_.isEmpty()&&(0,i.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Ye||(Ye=new e(new ze(Be),null,rt.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Ye},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Ye:t},e.prototype.getChild=function(e){var t=fe(e);return null===t?this:this.getImmediateChild(t).getChild(ve(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,i.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new De(t,n),o=void 0,a=void 0;n.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=o.isEmpty()?Ye:this.priorityNode_;return new e(o,s,a)},e.prototype.updateChild=function(e,t){var n=fe(e);if(null===n)return t;(0,i.hu)(".priority"!==fe(e)||1===me(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ve(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,o=0,i=!0;if(this.forEachChild(Je,(function(a,s){n[a]=s.val(t),r++,i&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):i=!1})),!t&&i&&o<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Qe(this.getPriority().val())+":"),this.forEachChild(Je,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":y(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var o=r.getPredecessorKey(new De(e,t));return o?o.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new De(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new De(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,De.Wrap),o=r.peek();null!=o&&t.compare(o,e)<0;)r.getNext(),o=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,De.Wrap),o=r.peek();null!=o&&t.compare(o,e)>0;)r.getNext(),o=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===it?-1:0},e.prototype.withIndex=function(t){if(t===Me||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Me||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Je),r=t.getIterator(Je),o=n.getNext(),i=r.getNext();o&&i;){if(o.name!==i.name||!o.node.equals(i.node))return!1;o=n.getNext(),i=r.getNext()}return null===o&&null===i}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Me?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),it=new(function(e){function t(){return e.call(this,new ze(Be),ot.EMPTY_NODE,rt.Default)||this}return(0,a.ZT)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return ot.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(ot));function at(e,t){if(void 0===t&&(t=null),null===e)return ot.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,i.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Ze(e,at(t));if(e instanceof Array){var n=ot.EMPTY_NODE;return q(e,(function(t,r){if((0,i.r3)(e,t)&&"."!==t.substring(0,1)){var o=at(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(t,o))}})),n.updatePriority(at(t))}var r=[],o=!1;if(q(e,(function(e,t){if("."!==e.substring(0,1)){var n=at(t);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new De(e,n)))}})),0===r.length)return ot.EMPTY_NODE;var a=tt(r,Ue,(function(e){return e.name}),Be);if(o){var s=tt(r,Je.getCompare());return new ot(a,at(t),new rt({".priority":s},{".priority":Je}))}return new ot(a,at(t),rt.Default)}Object.defineProperties(De,{MIN:{value:new De(I,ot.EMPTY_NODE)},MAX:{value:new De(A,it)}}),qe.__EMPTY_NODE=ot.EMPTY_NODE,Ze.__childrenNodeConstructor=ot,Ae=it,Ve=it,function(e){He=e}(at);var st,ct,lt=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,i.hu)(!Ce(t)&&".priority"!==fe(t),"Can't create PathIndex with empty path or .priority key"),n}return(0,a.ZT)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),o=n.compareTo(r);return 0===o?P(e.name,t.name):o},t.prototype.makePost=function(e,t){var n=at(e),r=ot.EMPTY_NODE.updateChild(this.indexPath_,n);return new De(t,r)},t.prototype.maxPost=function(){var e=ot.EMPTY_NODE.updateChild(this.indexPath_,it);return new De(A,e)},t.prototype.toString=function(){return ye(this.indexPath_,0).join("/")},t}(Oe),ut=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?P(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return De.MIN},t.prototype.maxPost=function(){return De.MAX},t.prototype.makePost=function(e,t){var n=at(e);return new De(t,n)},t.prototype.toString=function(){return".value"},t}(Oe)),dt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",pt=(st=0,ct=[],function(e){var t,n=e===st;st=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=dt.charAt(e%64),e=Math.floor(e/64);(0,i.hu)(0===e,"Cannot push at time == 0");var o=r.join("");if(n){for(t=11;t>=0&&63===ct[t];t--)ct[t]=0;ct[t]++}else for(t=0;t<12;t++)ct[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)o+=dt.charAt(ct[t]);return(0,i.hu)(20===o.length,"nextPushId: Length should be 20."),o}),ht=function(e){if("2147483647"===e)return"-";var t=W(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var o=n.length-1;o>=0&&"z"===n[o];)o--;if(-1===o)return A;var i=n[o],a=dt.charAt(dt.indexOf(i)+1);return n[o]=a,n.slice(0,o+1).join("")},ft=function(e){if("-2147483648"===e)return I;var t=W(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=dt.charAt(dt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function mt(e){return{type:"value",snapshotNode:e}}function vt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function gt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var _t=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,o,a){(0,i.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(gt(t,s)):(0,i.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(vt(t,n)):a.trackChildChange(yt(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Je,(function(e,r){t.hasChild(e)||n.trackChildChange(gt(e,r))})),t.isLeafNode()||t.forEachChild(Je,(function(t,r){if(e.hasChild(t)){var o=e.getImmediateChild(t);o.equals(r)||n.trackChildChange(yt(t,r,o))}else n.trackChildChange(vt(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?ot.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),bt=function(){function e(t){this.indexedFilter_=new _t(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,o,i){return this.matches(new De(t,n))||(n=ot.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,o,i)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=ot.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ot.EMPTY_NODE);var o=this;return t.forEachChild(Je,(function(e,t){o.matches(new De(e,t))||(r=r.updateImmediateChild(e,ot.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),Ct=function(){function e(e){this.rangedFilter_=new bt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,o,i){return this.rangedFilter_.matches(new De(t,n))||(n=ot.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,o,i):this.fullLimitUpdateChild_(e,t,n,o,i)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ot.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=ot.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var i=0;o.hasNext()&&i<this.limit_;){var a=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),i++}}else{r=(r=t.withIndex(this.index_)).updatePriority(ot.EMPTY_NODE);var s=void 0,c=void 0,l=void 0;if(o=void 0,this.reverse_){o=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var u=this.index_.getCompare();l=function(e,t){return u(t,e)}}else o=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();i=0;for(var d=!1;o.hasNext();)a=o.getNext(),!d&&l(s,a)<=0&&(d=!0),d&&i<this.limit_&&l(a,c)<=0?i++:r=r.updateImmediateChild(a.name,ot.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,o){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var c=e;(0,i.hu)(c.numChildren()===this.limit_,"");var l=new De(t,n),u=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(c.hasChild(t)){for(var p=c.getImmediateChild(t),h=r.getChildAfterChild(this.index_,u,this.reverse_);null!=h&&(h.name===t||c.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var f=null==h?1:a(h,l);if(d&&!n.isEmpty()&&f>=0)return null!=o&&o.trackChildChange(yt(t,n,p)),c.updateImmediateChild(t,n);null!=o&&o.trackChildChange(gt(t,p));var m=c.updateImmediateChild(t,ot.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=o&&o.trackChildChange(vt(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}return n.isEmpty()?e:d&&a(u,l)>=0?(null!=o&&(o.trackChildChange(gt(u.name,u.node)),o.trackChildChange(vt(t,n))),c.updateImmediateChild(t,n).updateImmediateChild(u.name,ot.EMPTY_NODE)):e},e}(),Et=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Je}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,i.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return(0,i.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,i.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return(0,i.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,i.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Je},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function wt(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function xt(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function kt(e,t){var n=e.copy();return n.index_=t,n}function St(e){var t,n={};return e.isDefault()||(e.index_===Je?t="$priority":e.index_===ut?t="$value":e.index_===Me?t="$key":((0,i.hu)(e.index_ instanceof lt,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,i.Pz)(t),e.startSet_&&(n.startAt=(0,i.Pz)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,i.Pz)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,i.Pz)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,i.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Nt(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Je&&(t.i=e.index_.toString()),t}var Tt=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.appCheckTokenProvider_=o,i.log_=x("p:rest:"),i.listens_={},i}return(0,a.ZT)(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,i.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,o){var a=this,s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);var c=t.getListenId_(e,r),l={};this.listens_[c]=l;var u=St(e._queryParams);this.restRequest_(s+".json",u,(function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(s,n,!1,r),(0,i.DV)(a.listens_,c)===l&&o(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=St(e._queryParams),r=e._path.toString(),o=new i.BH;return this.restRequest_(r+".json",n,(function(e,n){var i=n;404===e&&(i=null,e=null),null===e?(t.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))})),o.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(o){var s=(0,a.CR)(o,2),c=s[0],l=s[1];c&&c.accessToken&&(t.auth=c.accessToken),l&&l.token&&(t.ac=l.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,i.xO)(t);r.log_("Sending REST request for "+u);var d=new XMLHttpRequest;d.onreadystatechange=function(){if(n&&4===d.readyState){r.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);var e=null;if(d.status>=200&&d.status<300){try{e=(0,i.cI)(d.responseText)}catch(e){N("Failed to parse JSON response for "+u+": "+d.responseText)}n(null,e)}else 401!==d.status&&404!==d.status&&N("Got unsuccessful REST response for "+u+" Status: "+d.status),n(d.status);n=null}},d.open("GET",u,!0),d.send()}))},t}(le),It=function(){function e(){this.rootNode_=ot.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();function At(){return{value:null,children:new Map}}function Pt(e,t,n){if(Ce(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=fe(t);e.children.has(r)||e.children.set(r,At()),Pt(e.children.get(r),t=ve(t),n)}}function Lt(e,t){if(Ce(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Je,(function(t,n){Pt(e,new pe(t),n)})),Lt(e,t)}if(e.children.size>0){var r=fe(t);return t=ve(t),e.children.has(r)&&Lt(e.children.get(r),t)&&e.children.delete(r),0===e.children.size}return!0}function Rt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Rt(r,new pe(t.toString()+"/"+e),n)}))}var Dt,Ot=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,a.pi)({},e);return this.last_&&q(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),qt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ot(e);var n=1e4+2e4*Math.random();z(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;q(t,(function(t,o){o>0&&(0,i.r3)(e.statsToReport_,t)&&(n[t]=o,r=!0)})),r&&this.server_.reportStats(n),z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();function Mt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Dt||(Dt={}));var Ft,Wt=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Dt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(Ce(this.path)){if(null!=this.affectedTree.value)return(0,i.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new pe(t));return new e(he(),n,this.revert)}return(0,i.hu)(fe(this.path)===t,"operationForChild called for unrelated child."),new e(ve(this.path),this.affectedTree,this.revert)},e}(),jt=function(){function e(e,t){this.source=e,this.path=t,this.type=Dt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return Ce(this.path)?new e(this.source,he()):new e(this.source,ve(this.path))},e}(),zt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Dt.OVERWRITE}return e.prototype.operationForChild=function(t){return Ce(this.path)?new e(this.source,he(),this.snap.getImmediateChild(t)):new e(this.source,ve(this.path),this.snap)},e}(),Ut=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Dt.MERGE}return e.prototype.operationForChild=function(t){if(Ce(this.path)){var n=this.children.subtree(new pe(t));return n.isEmpty()?null:n.value?new zt(this.source,he(),n.value):new e(this.source,he(),n)}return(0,i.hu)(fe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ve(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),Bt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;var t=fe(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),$t=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};function Ht(e,t,n,r,o,a){var s=r.filter((function(e){return e.type===n}));s.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,i.g5)("Should only compare child_ events.");var r=new De(t.childName,t.snapshotNode),o=new De(n.childName,n.snapshotNode);return e.index_.compare(r,o)}(e,t,n)})),s.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);o.forEach((function(o){o.respondsTo(n.type)&&t.push(o.createEvent(r,e.query_))}))}))}function Vt(e,t){return{eventCache:e,serverCache:t}}function Gt(e,t,n,r){return Vt(new Bt(t,n,r),e.serverCache)}function Yt(e,t,n,r){return Vt(e.eventCache,new Bt(t,n,r))}function Qt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Kt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Zt=function(){function e(e,t){void 0===t&&(Ft||(Ft=new ze(L)),t=Ft),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return q(t,(function(e,t){n=n.set(new pe(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:he(),value:this.value};if(Ce(e))return null;var n=fe(e),r=this.children.get(n);if(null!==r){var o=r.findRootMostMatchingPathAndValue(ve(e),t);return null!=o?{path:be(new pe(n),o.path),value:o.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(Ce(t))return this;var n=fe(t),r=this.children.get(n);return null!==r?r.subtree(ve(t)):new e(null)},e.prototype.set=function(t,n){if(Ce(t))return new e(n,this.children);var r=fe(t),o=(this.children.get(r)||new e(null)).set(ve(t),n),i=this.children.insert(r,o);return new e(this.value,i)},e.prototype.remove=function(t){if(Ce(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=fe(t),r=this.children.get(n);if(r){var o=r.remove(ve(t)),i=void 0;return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this},e.prototype.get=function(e){if(Ce(e))return this.value;var t=fe(e),n=this.children.get(t);return n?n.get(ve(e)):null},e.prototype.setTree=function(t,n){if(Ce(t))return n;var r,o=fe(t),i=(this.children.get(o)||new e(null)).setTree(ve(t),n);return r=i.isEmpty()?this.children.remove(o):this.children.insert(o,i),new e(this.value,r)},e.prototype.fold=function(e){return this.fold_(he(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,o){n[r]=o.fold_(be(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,he(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Ce(e))return null;var o=fe(e),i=this.children.get(o);return i?i.findOnPath_(ve(e),be(t,o),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,he(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(Ce(t))return this;this.value&&r(n,this.value);var o=fe(t),i=this.children.get(o);return i?i.foreachOnPath_(ve(t),be(n,o),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(he(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(be(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),Jt=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new Zt(null))},e}();function Xt(e,t,n){if(Ce(t))return new Jt(new Zt(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var o=r.path,i=r.value,a=Ee(o,t);return i=i.updateChild(a,n),new Jt(e.writeTree_.set(o,i))}var s=new Zt(n),c=e.writeTree_.setTree(t,s);return new Jt(c)}function en(e,t,n){var r=e;return q(n,(function(e,n){r=Xt(r,be(t,e),n)})),r}function tn(e,t){if(Ce(t))return Jt.empty();var n=e.writeTree_.setTree(t,new Zt(null));return new Jt(n)}function nn(e,t){return null!=rn(e,t)}function rn(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ee(n.path,t)):null}function on(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Je,(function(e,n){t.push(new De(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new De(e,n.value))})),t}function an(e,t){if(Ce(t))return e;var n=rn(e,t);return new Jt(null!=n?new Zt(n):e.writeTree_.subtree(t))}function sn(e){return e.writeTree_.isEmpty()}function cn(e,t){return ln(he(),e.writeTree_,t)}function ln(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,o){".priority"===t?((0,i.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=ln(be(e,t),o,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(be(e,".priority"),r)),n}function un(e,t){return Cn(t,e)}function dn(e,t){if(e.snap)return ke(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&ke(be(e.path,n),t))return!0;return!1}function pn(e){return e.visible}function hn(e,t,n){for(var r=Jt.empty(),o=0;o<e.length;++o){var a=e[o];if(t(a)){var s=a.path,c=void 0;if(a.snap)ke(n,s)?r=Xt(r,c=Ee(n,s),a.snap):ke(s,n)&&(c=Ee(s,n),r=Xt(r,he(),a.snap.getChild(c)));else{if(!a.children)throw(0,i.g5)("WriteRecord should have .snap or .children");if(ke(n,s))r=en(r,c=Ee(n,s),a.children);else if(ke(s,n))if(Ce(c=Ee(s,n)))r=en(r,he(),a.children);else{var l=(0,i.DV)(a.children,fe(c));if(l){var u=l.getChild(ve(c));r=Xt(r,he(),u)}}}}}return r}function fn(e,t,n,r,o){if(r||o){var i=an(e.visibleWrites,t);return!o&&sn(i)?n:o||null!=n||nn(i,he())?cn(hn(e.allWrites,(function(e){return(e.visible||o)&&(!r||!~r.indexOf(e.writeId))&&(ke(e.path,t)||ke(t,e.path))}),t),n||ot.EMPTY_NODE):null}var a=rn(e.visibleWrites,t);if(null!=a)return a;var s=an(e.visibleWrites,t);return sn(s)?n:null!=n||nn(s,he())?cn(s,n||ot.EMPTY_NODE):null}function mn(e,t,n,r){return fn(e.writeTree,e.treePath,t,n,r)}function vn(e,t){return function(e,t,n){var r=ot.EMPTY_NODE,o=rn(e.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Je,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var i=an(e.visibleWrites,t);return n.forEachChild(Je,(function(e,t){var n=cn(an(i,new pe(e)),t);r=r.updateImmediateChild(e,n)})),on(i).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return on(an(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function gn(e,t,n,r){return function(e,t,n,r,o){(0,i.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");var a=be(t,n);if(nn(e.visibleWrites,a))return null;var s=an(e.visibleWrites,a);return sn(s)?o.getChild(n):cn(s,o.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function yn(e,t){return function(e,t){return rn(e.visibleWrites,t)}(e.writeTree,be(e.treePath,t))}function _n(e,t,n){return function(e,t,n,r){var o=be(t,n),i=rn(e.visibleWrites,o);return null!=i?i:r.isCompleteForChild(n)?cn(an(e.visibleWrites,o),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function bn(e,t){return Cn(be(e.treePath,t),e.writeTree)}function Cn(e,t){return{treePath:e,writeTree:t}}var En=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,i.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,i.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(n,yt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(n,gt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(n,vt(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,i.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,yt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),wn=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),xn=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Bt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kt(this.viewCache_),o=function(e,t,n,r,o,i){return function(e,t,n,r,o,i,a){var s,c=an(e.visibleWrites,t),l=rn(c,he());if(null!=l)s=l;else{if(null==n)return[];s=cn(c,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],d=a.getCompare(),p=i?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),h=p.getNext();h&&u.length<o;)0!==d(h,r)&&u.push(h),h=p.getNext();return u}(e.writeTree,e.treePath,t,n,r,o,i)}(this.writes_,r,t,1,n,e);return 0===o.length?null:o[0]},e}();function kn(e,t,n,r,o,a){var s=t.eventCache;if(null!=yn(r,n))return t;var c=void 0,l=void 0;if(Ce(n))if((0,i.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var u=Kt(t),d=vn(r,u instanceof ot?u:ot.EMPTY_NODE);c=e.filter.updateFullNode(t.eventCache.getNode(),d,a)}else{var p=mn(r,Kt(t));c=e.filter.updateFullNode(t.eventCache.getNode(),p,a)}else{var h=fe(n);if(".priority"===h){(0,i.hu)(1===me(n),"Can't have a priority with additional path components");var f=s.getNode(),m=gn(r,n,f,l=t.serverCache.getNode());c=null!=m?e.filter.updatePriority(f,m):s.getNode()}else{var v=ve(n),g=void 0;if(s.isCompleteForChild(h)){l=t.serverCache.getNode();var y=gn(r,n,s.getNode(),l);g=null!=y?s.getNode().getImmediateChild(h).updateChild(v,y):s.getNode().getImmediateChild(h)}else g=_n(r,h,t.serverCache);c=null!=g?e.filter.updateChild(s.getNode(),h,g,v,o,a):s.getNode()}}return Gt(t,c,s.isFullyInitialized()||Ce(n),e.filter.filtersNodes())}function Sn(e,t,n,r,o,i,a,s){var c,l=t.serverCache,u=a?e.filter:e.filter.getIndexedFilter();if(Ce(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){var d=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),d,null)}else{var p=fe(n);if(!l.isCompleteForPath(n)&&me(n)>1)return t;var h=ve(n),f=l.getNode().getImmediateChild(p).updateChild(h,r);c=".priority"===p?u.updatePriority(l.getNode(),f):u.updateChild(l.getNode(),p,f,h,wn,null)}var m=Yt(t,c,l.isFullyInitialized()||Ce(n),u.filtersNodes());return kn(e,m,n,o,new xn(o,m,i),s)}function Nn(e,t,n,r,o,i,a){var s,c,l=t.eventCache,u=new xn(o,t,i);if(Ce(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=Gt(t,c,!0,e.filter.filtersNodes());else{var d=fe(n);if(".priority"===d)c=e.filter.updatePriority(t.eventCache.getNode(),r),s=Gt(t,c,l.isFullyInitialized(),l.isFiltered());else{var p=ve(n),h=l.getNode().getImmediateChild(d),f=void 0;if(Ce(p))f=r;else{var m=u.getCompleteChild(d);f=null!=m?".priority"===ge(p)&&m.getChild(_e(p)).isEmpty()?m:m.updateChild(p,r):ot.EMPTY_NODE}s=h.equals(f)?t:Gt(t,e.filter.updateChild(l.getNode(),d,f,p,u,a),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Tn(e,t){return e.eventCache.isCompleteForChild(t)}function In(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function An(e,t,n,r,o,i,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var c,l=t;c=Ce(n)?r:new Zt(null).setTree(n,r);var u=t.serverCache.getNode();return c.children.inorderTraversal((function(n,r){if(u.hasChild(n)){var c=In(0,t.serverCache.getNode().getImmediateChild(n),r);l=Sn(e,l,new pe(n),c,o,i,a,s)}})),c.children.inorderTraversal((function(n,r){var c=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!u.hasChild(n)&&!c){var d=In(0,t.serverCache.getNode().getImmediateChild(n),r);l=Sn(e,l,new pe(n),d,o,i,a,s)}})),l}var Pn,Ln=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_._queryParams,o=new _t(r.getIndex()),i=(n=r).loadsAllData()?new _t(n.getIndex()):n.hasLimit()?new Ct(n):new bt(n);this.processor_=function(e){return{filter:e}}(i);var a=t.serverCache,s=t.eventCache,c=o.updateFullNode(ot.EMPTY_NODE,a.getNode(),null),l=i.updateFullNode(ot.EMPTY_NODE,s.getNode(),null),u=new Bt(c,a.isFullyInitialized(),o.filtersNodes()),d=new Bt(l,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=Vt(d,u),this.eventGenerator_=new $t(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Rn(e,t){var n=Kt(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ce(t)&&!n.getImmediateChild(fe(t)).isEmpty())?n.getChild(t):null}function Dn(e){return 0===e.eventRegistrations_.length}function On(e,t,n){var r=[];if(n){(0,i.hu)(null==t,"A cancel should cancel all event registrations.");var o=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,o);t&&r.push(t)}))}if(t){for(var a=[],s=0;s<e.eventRegistrations_.length;++s){var c=e.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(s+1));break}}else a.push(c)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function qn(e,t,n,r){t.type===Dt.MERGE&&null!==t.source.queryId&&((0,i.hu)(Kt(e.viewCache_),"We should always have a full cache before handling merges"),(0,i.hu)(Qt(e.viewCache_),"Missing event cache, even though we have a server cache"));var o,a,s=e.viewCache_,c=function(e,t,n,r,o){var a,s,c=new En;if(n.type===Dt.OVERWRITE){var l=n;l.source.fromUser?a=Nn(e,t,l.path,l.snap,r,o,c):((0,i.hu)(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered()&&!Ce(l.path),a=Sn(e,t,l.path,l.snap,r,o,s,c))}else if(n.type===Dt.MERGE){var u=n;u.source.fromUser?a=function(e,t,n,r,o,i,a){var s=t;return r.foreach((function(r,c){var l=be(n,r);Tn(t,fe(l))&&(s=Nn(e,s,l,c,o,i,a))})),r.foreach((function(r,c){var l=be(n,r);Tn(t,fe(l))||(s=Nn(e,s,l,c,o,i,a))})),s}(e,t,u.path,u.children,r,o,c):((0,i.hu)(u.source.fromServer,"Unknown source."),s=u.source.tagged||t.serverCache.isFiltered(),a=An(e,t,u.path,u.children,r,o,s,c))}else if(n.type===Dt.ACK_USER_WRITE){var d=n;a=d.revert?function(e,t,n,r,o,a){var s;if(null!=yn(r,n))return t;var c=new xn(r,t,o),l=t.eventCache.getNode(),u=void 0;if(Ce(n)||".priority"===fe(n)){var d=void 0;if(t.serverCache.isFullyInitialized())d=mn(r,Kt(t));else{var p=t.serverCache.getNode();(0,i.hu)(p instanceof ot,"serverChildren would be complete if leaf node"),d=vn(r,p)}d=d,u=e.filter.updateFullNode(l,d,a)}else{var h=fe(n),f=_n(r,h,t.serverCache);null==f&&t.serverCache.isCompleteForChild(h)&&(f=l.getImmediateChild(h)),(u=null!=f?e.filter.updateChild(l,h,f,ve(n),c,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(l,h,ot.EMPTY_NODE,ve(n),c,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(s=mn(r,Kt(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,s,a))}return s=t.serverCache.isFullyInitialized()||null!=yn(r,he()),Gt(t,u,s,e.filter.filtersNodes())}(e,t,d.path,r,o,c):function(e,t,n,r,o,i,a){if(null!=yn(o,n))return t;var s=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(Ce(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Sn(e,t,n,c.getNode().getChild(n),o,i,s,a);if(Ce(n)){var l=new Zt(null);return c.getNode().forEachChild(Me,(function(e,t){l=l.set(new pe(e),t)})),An(e,t,n,l,o,i,s,a)}return t}var u=new Zt(null);return r.foreach((function(e,t){var r=be(n,e);c.isCompleteForPath(r)&&(u=u.set(e,c.getNode().getChild(r)))})),An(e,t,n,u,o,i,s,a)}(e,t,d.path,d.affectedTree,r,o,c)}else{if(n.type!==Dt.LISTEN_COMPLETE)throw(0,i.g5)("Unknown operation type: "+n.type);a=function(e,t,n,r,o){var i=t.serverCache;return kn(e,Yt(t,i.getNode(),i.isFullyInitialized()||Ce(n),i.isFiltered()),n,r,wn,o)}(e,t,n.path,r,c)}var p=c.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var o=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Qt(e);(n.length>0||!e.eventCache.isFullyInitialized()||o&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(mt(Qt(t)))}}(t,a,p),{viewCache:a,changes:p}}(e.processor_,s,t,n,r);return o=e.processor_,a=c.viewCache,(0,i.hu)(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,i.hu)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,i.hu)(c.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=c.viewCache,Mn(e,c.changes,c.viewCache.eventCache.getNode(),null)}function Mn(e,t,n,r){var o=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var o=[],i=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&i.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ht(e,o,"child_removed",t,r,n),Ht(e,o,"child_added",t,r,n),Ht(e,o,"child_moved",i,r,n),Ht(e,o,"child_changed",t,r,n),Ht(e,o,"value",t,r,n),o}(e.eventGenerator_,t,n,o)}var Fn,Wn=function(){this.views=new Map};function jn(e,t,n,r){var o,s,c=t.source.queryId;if(null!==c){var l=e.views.get(c);return(0,i.hu)(null!=l,"SyncTree gave us an op for an invalid query."),qn(l,t,n,r)}var u=[];try{for(var d=(0,a.XA)(e.views.values()),p=d.next();!p.done;p=d.next())l=p.value,u=u.concat(qn(l,t,n,r))}catch(e){o={error:e}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}return u}function zn(e,t,n,r,o){var i=t._queryIdentifier,a=e.views.get(i);if(!a){var s=mn(n,o?r:null),c=!1;s?c=!0:r instanceof ot?(s=vn(n,r),c=!1):(s=ot.EMPTY_NODE,c=!1);var l=Vt(new Bt(s,c,!1),new Bt(r,o,!1));return new Ln(t,l)}return a}function Un(e){var t,n,r=[];try{for(var o=(0,a.XA)(e.views.values()),i=o.next();!i.done;i=o.next()){var s=i.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function Bn(e,t){var n,r,o=null;try{for(var i=(0,a.XA)(e.views.values()),s=i.next();!s.done;s=i.next()){var c=s.value;o=o||Rn(c,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}function $n(e,t){if(t._queryParams.loadsAllData())return Gn(e);var n=t._queryIdentifier;return e.views.get(n)}function Hn(e,t){return null!=$n(e,t)}function Vn(e){return null!=Gn(e)}function Gn(e){var t,n;try{for(var r=(0,a.XA)(e.views.values()),o=r.next();!o.done;o=r.next()){var i=o.value;if(i.query._queryParams.loadsAllData())return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var Yn=1,Qn=function(e){this.listenProvider_=e,this.syncPointTree_=new Zt(null),this.pendingWriteTree_={visibleWrites:Jt.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Kn(e,t,n,r,o){return function(e,t,n,r,o){(0,i.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:o}),o&&(e.visibleWrites=Xt(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,o),o?nr(e,new zt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Zn(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));(0,i.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var o=r.visible,a=!1,s=e.allWrites.length-1;o&&s>=0;){var c=e.allWrites[s];c.visible&&(s>=n&&dn(c,r.path)?o=!1:ke(r.path,c.path)&&(a=!0)),s--}return!!o&&(a?(function(e){e.visibleWrites=hn(e.allWrites,pn,he()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(r.snap?e.visibleWrites=tn(e.visibleWrites,r.path):q(r.children,(function(t){e.visibleWrites=tn(e.visibleWrites,be(r.path,t))})),!0))}(e.pendingWriteTree_,t)){var o=new Zt(null);return null!=r.snap?o=o.set(he(),!0):q(r.children,(function(e){o=o.set(new pe(e),!0)})),nr(e,new Wt(r.path,o,n))}return[]}function Jn(e,t,n){return nr(e,new zt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Xn(e,t,n,r){var o=t._path,s=e.syncPointTree_.get(o),c=[];if(s&&("default"===t._queryIdentifier||Hn(s,t))){var l=function(e,t,n,r){var o,s,c=t._queryIdentifier,l=[],u=[],d=Vn(e);if("default"===c)try{for(var p=(0,a.XA)(e.views.entries()),h=p.next();!h.done;h=p.next()){var f=(0,a.CR)(h.value,2),m=f[0],v=f[1];u=u.concat(On(v,n,r)),Dn(v)&&(e.views.delete(m),v.query._queryParams.loadsAllData()||l.push(v.query))}}catch(e){o={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}else(v=e.views.get(c))&&(u=u.concat(On(v,n,r)),Dn(v)&&(e.views.delete(c),v.query._queryParams.loadsAllData()||l.push(v.query)));return d&&!Vn(e)&&l.push(new((0,i.hu)(Pn,"Reference.ts has not been loaded"),Pn)(t._repo,t._path)),{removed:l,events:u}}(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));var u=l.removed;c=l.events;var d=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),p=e.syncPointTree_.findOnPath(o,(function(e,t){return Vn(t)}));if(d&&!p){var h=e.syncPointTree_.subtree(o);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&Vn(t))return[Gn(t)];var r=[];return t&&(r=Un(t)),q(n,(function(e,t){r=r.concat(t)})),r}))}(h),m=0;m<f.length;++m){var v=f[m],g=v.query,y=ir(e,v);e.listenProvider_.startListening(dr(g),ar(e,g),y.hashFn,y.onComplete)}}!p&&u.length>0&&!r&&(d?e.listenProvider_.stopListening(dr(t),null):u.forEach((function(t){var n=e.queryToTagMap.get(sr(t));e.listenProvider_.stopListening(dr(t),n)}))),function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var o=sr(r),i=e.queryToTagMap.get(o);e.queryToTagMap.delete(o),e.tagToQueryMap.delete(i)}}}(e,u)}return c}function er(e,t,n){var r=t._path,o=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=Ee(e,r);o=o||Bn(t,n),a=a||Vn(t)}));var s,c=e.syncPointTree_.get(r);c?(a=a||Vn(c),o=o||Bn(c,he())):(c=new Wn,e.syncPointTree_=e.syncPointTree_.set(r,c)),null!=o?s=!0:(s=!1,o=ot.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Bn(t,he());n&&(o=o.updateImmediateChild(e,n))})));var l=Hn(c,t);if(!l&&!t._queryParams.loadsAllData()){var u=sr(t);(0,i.hu)(!e.queryToTagMap.has(u),"View does not exist, but we have a tag");var d=Yn++;e.queryToTagMap.set(u,d),e.tagToQueryMap.set(d,u)}var p=function(e,t,n,r,o,i){var a=zn(e,t,r,o,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Je,(function(e,t){r.push(vt(e,t))})),n.isFullyInitialized()&&r.push(mt(n.getNode())),Mn(e,r,n.getNode(),t)}(a,n)}(c,t,n,un(e.pendingWriteTree_,r),o,s);if(!l&&!a){var h=$n(c,t);p=p.concat(function(e,t,n){var r=t._path,o=ar(e,t),a=ir(e,n),s=e.listenProvider_.startListening(dr(t),o,a.hashFn,a.onComplete),c=e.syncPointTree_.subtree(r);if(o)(0,i.hu)(!Vn(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold((function(e,t,n){if(!Ce(e)&&t&&Vn(t))return[Gn(t).query];var r=[];return t&&(r=r.concat(Un(t).map((function(e){return e.query})))),q(n,(function(e,t){r=r.concat(t)})),r})),u=0;u<l.length;++u){var d=l[u];e.listenProvider_.stopListening(dr(d),ar(e,d))}return s}(e,t,h))}return p}function tr(e,t,n){var r=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Bn(n,Ee(e,t));if(r)return r}));return fn(r,t,o,n,!0)}function nr(e,t){return rr(t,e.syncPointTree_,null,un(e.pendingWriteTree_,he()))}function rr(e,t,n,r){if(Ce(e.path))return or(e,t,n,r);var o=t.get(he());null==n&&null!=o&&(n=Bn(o,he()));var i=[],a=fe(e.path),s=e.operationForChild(a),c=t.children.get(a);if(c&&s){var l=n?n.getImmediateChild(a):null,u=bn(r,a);i=i.concat(rr(s,c,l,u))}return o&&(i=i.concat(jn(o,e,r,n))),i}function or(e,t,n,r){var o=t.get(he());null==n&&null!=o&&(n=Bn(o,he()));var i=[];return t.children.inorderTraversal((function(t,o){var a=n?n.getImmediateChild(t):null,s=bn(r,t),c=e.operationForChild(t);c&&(i=i.concat(or(c,o,a,s)))})),o&&(i=i.concat(jn(o,e,r,n))),i}function ir(e,t){var n=t.query,r=ar(e,n);return{hashFn:function(){return(function(e){return e.viewCache_.serverCache.getNode()}(t)||ot.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=cr(e,n);if(r){var o=lr(r),i=o.path,a=o.queryId,s=Ee(i,t);return ur(e,i,new jt(Mt(a),s))}return[]}(e,n._path,r):function(e,t){return nr(e,new jt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var o=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Xn(e,n,null,o)}}}function ar(e,t){var n=sr(t);return e.queryToTagMap.get(n)}function sr(e){return e._path.toString()+"$"+e._queryIdentifier}function cr(e,t){return e.tagToQueryMap.get(t)}function lr(e){var t=e.indexOf("$");return(0,i.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new pe(e.substr(0,t))}}function ur(e,t,n){var r=e.syncPointTree_.get(t);return(0,i.hu)(r,"Missing sync point for query tag that we're tracking"),jn(r,n,un(e.pendingWriteTree_,t),null)}function dr(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,i.hu)(Fn,"Reference.ts has not been loaded"),Fn)(e._repo,e._path):e}var pr=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),hr=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=be(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return tr(this.syncTree_,this.path_)},e}(),fr=function(e,t,n){return e&&"object"==typeof e?((0,i.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?mr(e[".sv"],t,n):"object"==typeof e[".sv"]?vr(e[".sv"],t):void(0,i.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},mr=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,i.hu)(!1,"Unexpected server value: "+e)}},vr=function(e,t,n){e.hasOwnProperty("increment")||(0,i.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&(0,i.hu)(!1,"Unexpected increment value: "+r);var o=t.node();if((0,i.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var a=o.getValue();return"number"!=typeof a?r:a+r},gr=function(e,t,n,r){return _r(t,new hr(n,e),r)},yr=function(e,t,n){return _r(e,new pr(t),n)};function _r(e,t,n){var r,o=e.getPriority().val(),i=fr(o,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=fr(a.getValue(),t,n);return s!==a.getValue()||i!==a.getPriority().val()?new Ze(s,at(i)):e}var c=e;return r=c,i!==c.getPriority().val()&&(r=r.updatePriority(new Ze(i))),c.forEachChild(Je,(function(e,o){var i=_r(o,t.getImmediateChild(e),n);i!==o&&(r=r.updateImmediateChild(e,i))})),r}var br=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function Cr(e,t){for(var n=t instanceof pe?t:new pe(t),r=e,o=fe(n);null!==o;){var a=(0,i.DV)(r.node.children,o)||{children:{},childCount:0};r=new br(o,r,a),o=fe(n=ve(n))}return r}function Er(e){return e.node.value}function wr(e,t){e.node.value=t,Tr(e)}function xr(e){return e.node.childCount>0}function kr(e,t){q(e.node.children,(function(n,r){t(new br(n,e,r))}))}function Sr(e,t,n,r){n&&!r&&t(e),kr(e,(function(e){Sr(e,t,!0,r)})),n&&r&&t(e)}function Nr(e){return new pe(null===e.parent?e.name:Nr(e.parent)+"/"+e.name)}function Tr(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Er(e)&&!xr(e)}(n),o=(0,i.r3)(e.node.children,t);r&&o?(delete e.node.children[t],e.node.childCount--,Tr(e)):r||o||(e.node.children[t]=n.node,e.node.childCount++,Tr(e))}(e.parent,e.name,e)}var Ir=/[\[\].#$\/\u0000-\u001F\u007F]/,Ar=/[\[\].#$\u0000-\u001F\u007F]/,Pr=10485760,Lr=function(e){return"string"==typeof e&&0!==e.length&&!Ir.test(e)},Rr=function(e){return"string"==typeof e&&0!==e.length&&!Ar.test(e)},Dr=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!T(e)||e&&"object"==typeof e&&(0,i.r3)(e,".sv")},Or=function(e,t,n,r){r&&void 0===t||qr((0,i.gK)(e,"value"),t,n)},qr=function(e,t,n){var r=n instanceof pe?new Se(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Te(r));if("function"==typeof t)throw new Error(e+"contains a function "+Te(r)+" with contents = "+t.toString());if(T(t))throw new Error(e+"contains "+t.toString()+" "+Te(r));if("string"==typeof t&&t.length>Pr/3&&(0,i.ug)(t)>Pr)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Te(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var o=!1,a=!1;if(q(t,(function(t,n){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!Lr(t)))throw new Error(e+" contains an invalid key ("+t+") "+Te(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,c;!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,i.ug)(t),Ne(e)}(r,t),qr(e,n,r),c=(s=r).parts_.pop(),s.byteLength_-=(0,i.ug)(c),s.parts_.length>0&&(s.byteLength_-=1)})),o&&a)throw new Error(e+' contains ".value" child '+Te(r)+" in addition to actual children.")}},Mr=function(e,t,n,r){if(!r||void 0!==t){var o=(0,i.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");var a=[];q(t,(function(e,t){var r=new pe(e);if(qr(o,t,be(n,r)),".priority"===ge(r)&&!Dr(t))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var o=ye(r=t[n]),i=0;i<o.length;i++)if(".priority"===o[i]&&i===o.length-1);else if(!Lr(o[i]))throw new Error(e+"contains an invalid key ("+o[i]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(we);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&ke(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},Fr=function(e,t,n){if(!n||void 0!==t){if(T(t))throw new Error((0,i.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(t))throw new Error((0,i.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wr=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,i.gK)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},jr=function(e,t,n,r){if(!(r&&void 0===n||Lr(n)))throw new Error((0,i.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},zr=function(e,t,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error((0,i.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ur=function(e,t){if(".info"===fe(t))throw new Error(e+" failed = Can't modify data under /.info/")},Br=function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Lr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Rr(e)}(n))throw new Error((0,i.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},$r=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,i.gK)(e,t)+"must be a boolean.")},Hr=function(){this.eventLists_=[],this.recursionDepth_=0};function Vr(e,t){for(var n=null,r=0;r<t.length;r++){var o=t[r],i=o.getPath();null===n||xe(i,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:i}),n.events.push(o)}n&&e.eventLists_.push(n)}function Gr(e,t,n){Vr(e,n),Qr(e,(function(e){return xe(e,t)}))}function Yr(e,t,n){Vr(e,n),Qr(e,(function(e){return ke(e,t)||ke(t,e)}))}function Qr(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var o=e.eventLists_[r];o&&(t(o.path)?(Kr(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function Kr(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();b&&w("event: "+n.toString()),j(r)}}}var Zr="repo_interrupt",Jr=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=At(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function Xr(e){var t=e.infoData_.getNode(new pe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function eo(e){return(t=(t={timestamp:Xr(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function to(e,t,n,r,o){e.dataUpdateCount++;var a=new pe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(o)if(r){var c=(0,i.UI)(n,(function(e){return at(e)}));s=function(e,t,n,r){var o=cr(e,r);if(o){var i=lr(o),a=i.path,s=i.queryId,c=Ee(a,t),l=Zt.fromObject(n);return ur(e,a,new Ut(Mt(s),c,l))}return[]}(e.serverSyncTree_,a,c,o)}else{var l=at(n);s=function(e,t,n,r){var o=cr(e,r);if(null!=o){var i=lr(o),a=i.path,s=i.queryId,c=Ee(a,t);return ur(e,a,new zt(Mt(s),c,n))}return[]}(e.serverSyncTree_,a,l,o)}else if(r){var u=(0,i.UI)(n,(function(e){return at(e)}));s=function(e,t,n){var r=Zt.fromObject(n);return nr(e,new Ut({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,u)}else{var d=at(n);s=Jn(e.serverSyncTree_,a,d)}var p=a;s.length>0&&(p=mo(e,a)),Yr(e.eventQueue_,p,s)}function no(e,t){ro(e,"connected",t),!1===t&&function(e){uo(e,"onDisconnectEvents");var t=eo(e),n=At();Rt(e.onDisconnect_,he(),(function(r,o){var i=gr(r,o,e.serverSyncTree_,t);Pt(n,r,i)}));var r=[];Rt(n,he(),(function(t,n){r=r.concat(Jn(e.serverSyncTree_,t,n));var o=bo(e,t);mo(e,o)})),e.onDisconnect_=At(),Yr(e.eventQueue_,he(),r)}(e)}function ro(e,t,n){var r=new pe("/.info/"+t),o=at(n);e.infoData_.updateSnapshot(r,o);var i=Jn(e.infoSyncTree_,r,o);Yr(e.eventQueue_,r,i)}function oo(e){return e.nextWriteId_++}function io(e,t,n,r,o){uo(e,"set",{path:t.toString(),value:n,priority:r});var i=eo(e),a=at(n,r),s=tr(e.serverSyncTree_,t),c=yr(a,s,i),l=oo(e),u=Kn(e.serverSyncTree_,t,c,l,!0);Vr(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),(function(n,r){var i="ok"===n;i||N("set at "+t+" failed: "+n);var a=Zn(e.serverSyncTree_,l,!i);Yr(e.eventQueue_,t,a),po(0,o,n,r)}));var d=bo(e,t);mo(e,d),Yr(e.eventQueue_,d,[])}function ao(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,o){"ok"===r&&Lt(e.onDisconnect_,t),po(0,n,r,o)}))}function so(e,t,n,r){var o=at(n);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,i){"ok"===n&&Pt(e.onDisconnect_,t,o),po(0,r,n,i)}))}function co(e,t,n){var r;r=".info"===fe(t._path)?Xn(e.infoSyncTree_,t,n):Xn(e.serverSyncTree_,t,n),Gr(e.eventQueue_,t._path,r)}function lo(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Zr)}function uo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),w.apply(void 0,(0,a.ev)([r],(0,a.CR)(t)))}function po(e,t,n,r){t&&j((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),o=e;r&&(o+=": "+r);var i=new Error(o);i.code=e,t(i)}}))}function ho(e,t,n){return tr(e.serverSyncTree_,t,n)||ot.EMPTY_NODE}function fo(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||_o(e,t),Er(t)){var n=go(e,t);(0,i.hu)(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),o=ho(e,t,r),a=o,s=o.hash(),c=0;c<n.length;c++){var l=n[c];(0,i.hu)(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;var u=Ee(t,l.path);a=a.updateChild(u,l.currentOutputSnapshotRaw)}var d=a.val(!0),p=t;e.server_.put(p.toString(),d,(function(r){uo(e,"transaction put response",{path:p.toString(),status:r});var o=[];if("ok"===r){for(var i=[],a=function(t){n[t].status=2,o=o.concat(Zn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);for(_o(e,Cr(e.transactionQueueTree_,t)),fo(e,e.transactionQueueTree_),Yr(e.eventQueue_,t,o),s=0;s<i.length;s++)j(i[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else for(N("transaction at "+p.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;mo(e,t)}}),s)}(e,Nr(t),n)}else xr(t)&&kr(t,(function(t){fo(e,t)}))}function mo(e,t){var n=vo(e,t),r=Nr(n);return function(e,t,n){if(0!==t.length){for(var r=[],o=[],a=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),s=function(s){var c,l,u=t[s],d=Ee(n,u.path),p=!1;if((0,i.hu)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)p=!0,c=u.abortReason,o=o.concat(Zn(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)p=!0,c="maxretry",o=o.concat(Zn(e.serverSyncTree_,u.currentWriteId,!0));else{var h=ho(e,u.path,a);u.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){qr("transaction failed: Data returned ",f,u.path);var m=at(f);"object"==typeof f&&null!=f&&(0,i.r3)(f,".priority")||(m=m.updatePriority(h.getPriority()));var v=u.currentWriteId,g=eo(e),y=yr(m,h,g);u.currentOutputSnapshotRaw=m,u.currentOutputSnapshotResolved=y,u.currentWriteId=oo(e),a.splice(a.indexOf(v),1),o=(o=o.concat(Kn(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(Zn(e.serverSyncTree_,v,!0))}else p=!0,c="nodata",o=o.concat(Zn(e.serverSyncTree_,u.currentWriteId,!0))}Yr(e.eventQueue_,n,o),o=[],p&&(t[s].status=2,l=t[s].unwatcher,setTimeout(l,Math.floor(0)),t[s].onComplete&&("nodata"===c?r.push((function(){return t[s].onComplete(null,!1,t[s].currentInputSnapshot)})):r.push((function(){return t[s].onComplete(new Error(c),!1,null)}))))},c=0;c<t.length;c++)s(c);for(_o(e,e.transactionQueueTree_),c=0;c<r.length;c++)j(r[c]);fo(e,e.transactionQueueTree_)}}(e,go(e,n),r),r}function vo(e,t){var n,r=e.transactionQueueTree_;for(n=fe(t);null!==n&&void 0===Er(r);)r=Cr(r,n),n=fe(t=ve(t));return r}function go(e,t){var n=[];return yo(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function yo(e,t,n){var r=Er(t);if(r)for(var o=0;o<r.length;o++)n.push(r[o]);kr(t,(function(t){yo(e,t,n)}))}function _o(e,t){var n=Er(t);if(n){for(var r=0,o=0;o<n.length;o++)2!==n[o].status&&(n[r]=n[o],r++);n.length=r,wr(t,n.length>0?n:void 0)}kr(t,(function(t){_o(e,t)}))}function bo(e,t){var n=Nr(vo(e,t)),r=Cr(e.transactionQueueTree_,t);return function(e,t,n){for(var r=e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Co(e,t)})),Co(e,r),Sr(r,(function(t){Co(e,t)})),n}function Co(e,t){var n=Er(t);if(n){for(var r=[],o=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,i.hu)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):((0,i.hu)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),o=o.concat(Zn(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?wr(t,void 0):n.length=a+1,Yr(e.eventQueue_,Nr(t),o),s=0;s<r.length;s++)j(r[s])}}var Eo=function(e,t){var n=wo(e),r=n.namespace;"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&N("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var o="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Y(n.host,n.secure,r,t,o,"",r!==n.subdomain),path:new pe(n.pathString)}},wo=function(e){var t="",n="",r="",o="",i="",s=!0,c="https",l=443;if("string"==typeof e){var u=e.indexOf("//");u>=0&&(c=e.substring(0,u-1),e=e.substring(u+2));var d=e.indexOf("/");-1===d&&(d=e.length);var p=e.indexOf("?");-1===p&&(p=e.length),t=e.substring(0,Math.min(d,p)),d<p&&(o=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(e){}t+="/"+o}return t}(e.substring(d,p)));var h=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var o=(0,a.XA)(e.split("&")),i=o.next();!i.done;i=o.next()){var s=i.value;if(0!==s.length){var c=s.split("=");2===c.length?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):N("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,p)));(u=t.indexOf(":"))>=0?(s="https"===c||"wss"===c,l=parseInt(t.substring(u+1),10)):u=t.length;var f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{var m=t.indexOf(".");r=t.substring(0,m).toLowerCase(),n=t.substring(m+1),i=r}"ns"in h&&(i=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:c,pathString:o,namespace:i}},xo=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,i.Pz)(this.snapshot.exportVal())},e}(),ko=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),So=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return(0,i.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),No=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new i.BH;return ao(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){Ur("OnDisconnect.remove",this._path);var e=new i.BH;return so(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){Ur("OnDisconnect.set",this._path),Or("OnDisconnect.set",e,this._path,!1);var t=new i.BH;return so(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){Ur("OnDisconnect.setWithPriority",this._path),Or("OnDisconnect.setWithPriority",e,this._path,!1),Fr("OnDisconnect.setWithPriority",t,!1);var n=new i.BH;return function(e,t,n,r,o){var i=at(n,r);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,r){"ok"===n&&Pt(e.onDisconnect_,t,i),po(0,o,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){Ur("OnDisconnect.update",this._path),Mr("OnDisconnect.update",e,this._path,!1);var t=new i.BH;return function(e,t,n,r){if((0,i.xb)(n))return w("onDisconnect().update() called with empty data.  Don't do anything."),void po(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(o,i){"ok"===o&&q(n,(function(n,r){var o=at(r);Pt(e.onDisconnect_,be(t,n),o)})),po(0,r,o,i)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),To=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return Ce(this._path)?null:ge(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Lo(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=Nt(this._queryParams),t=D(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return Nt(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=(0,i.m9)(t))instanceof e))return!1;var n=this._repo===t._repo,r=xe(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return n&&r&&o},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function Io(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ao(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Me){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof t)throw new Error(o)}if(e.hasEnd()){if(e.getIndexEndName()!==A)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(e.getIndex()===Je){if(null!=t&&!Dr(t)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,i.hu)(e.getIndex()instanceof lt||e.getIndex()===ut,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Po(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Lo=function(e){function t(t,n){return e.call(this,t,n,new Et,!1)||this}return(0,a.ZT)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=_e(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(To),Ro=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new pe(t),r=qo(this.ref,t);return new e(this._node.getChild(n),r,Je)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,o){return t(new e(o,qo(n.ref,r),Je))}))},e.prototype.hasChild=function(e){var t=new pe(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function Do(e,t){return(e=(0,i.m9)(e))._checkNotDeleted("ref"),void 0!==t?qo(e._root,t):e._root}function Oo(e,t){(e=(0,i.m9)(e))._checkNotDeleted("refFromURL");var n=Eo(t,e._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Do(e,n.path.toString())}function qo(e,t){var n;return null===fe((e=(0,i.m9)(e))._path)?("child","path",!1,(n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zr("child","path",n,false)):zr("child","path",t,!1),new Lo(e._repo,be(e._path,t))}function Mo(e,t){e=(0,i.m9)(e),Ur("push",e._path),Or("push",t,e._path,!0);var n,r=Xr(e._repo),o=pt(r),a=qo(e,o),s=qo(e,o);return n=null!=t?Wo(s,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Fo(e){return Ur("remove",e._path),Wo(e,null)}function Wo(e,t){e=(0,i.m9)(e),Ur("set",e._path),Or("set",t,e._path,!1);var n=new i.BH;return io(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function jo(e,t){e=(0,i.m9)(e),Ur("setPriority",e._path),Fr("setPriority",t,!1);var n=new i.BH;return io(e._repo,be(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function zo(e,t,n){if(Ur("setWithPriority",e._path),Or("setWithPriority",t,e._path,!1),Fr("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new i.BH;return io(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Uo(e,t){Mr("update",t,e._path,!1);var n=new i.BH;return function(e,t,n,r){uo(e,"update",{path:t.toString(),value:n});var o=!0,a=eo(e),s={};if(q(n,(function(n,r){o=!1,s[n]=gr(be(t,n),at(r),e.serverSyncTree_,a)})),o)w("update() called with empty data.  Don't do anything."),po(0,r,"ok",void 0);else{var c=oo(e),l=function(e,t,n,r){!function(e,t,n,r){(0,i.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=en(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var o=Zt.fromObject(n);return nr(e,new Ut({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,o))}(e.serverSyncTree_,t,s,c);Vr(e.eventQueue_,l),e.server_.merge(t.toString(),n,(function(n,o){var i="ok"===n;i||N("update at "+t+" failed: "+n);var a=Zn(e.serverSyncTree_,c,!i),s=a.length>0?mo(e,t):t;Yr(e.eventQueue_,s,a),po(0,r,n,o)})),q(n,(function(n){var r=bo(e,be(t,n));mo(e,r)})),Yr(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Bo(e){return function(e,t){var n=function(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var o=Ee(e,n);r=r||Bn(t,o)}));var o=e.syncPointTree_.get(n);o?r=r||Bn(o,he()):(o=new Wn,e.syncPointTree_=e.syncPointTree_.set(n,o));var i=null!=r,a=i?new Bt(r,!0,!1):null;return Qt(zn(o,t,un(e.pendingWriteTree_,t._path),i?a.getNode():ot.EMPTY_NODE,i).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=at(n).withIndex(t._queryParams.getIndex()),o=Jn(e.serverSyncTree_,t._path,r);return Gr(e.eventQueue_,t._path,o),Promise.resolve(r)}),(function(n){return uo(e,"get for query "+(0,i.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=(0,i.m9)(e))._repo,e).then((function(t){return new Ro(t,new Lo(e._repo,e._path),e._queryParams.getIndex())}))}var $o=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new xo("value",this,new Ro(e.snapshotNode,new Lo(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ko(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),Ho=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ko(this,e,t):null},e.prototype.createEvent=function(e,t){(0,i.hu)(null!=e.childName,"Child events should have a childName.");var n=qo(new Lo(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new xo(e.type,this,new Ro(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function Vo(e,t,n,r,o){var i;if("object"==typeof r&&(i=void 0,o=r),"function"==typeof r&&(i=r),o&&o.onlyOnce){var a=n,s=function(t,n){co(e._repo,e,l),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var c=new So(n,i||void 0),l="value"===t?new $o(c):new Ho(t,c);return function(e,t,n){var r;r=".info"===fe(t._path)?er(e.infoSyncTree_,t,n):er(e.serverSyncTree_,t,n),Gr(e.eventQueue_,t._path,r)}(e._repo,e,l),function(){return co(e._repo,e,l)}}function Go(e,t,n,r){return Vo(e,"value",t,n,r)}function Yo(e,t,n,r){return Vo(e,"child_added",t,n,r)}function Qo(e,t,n,r){return Vo(e,"child_changed",t,n,r)}function Ko(e,t,n,r){return Vo(e,"child_moved",t,n,r)}function Zo(e,t,n,r){return Vo(e,"child_removed",t,n,r)}function Jo(e,t,n){var r=null,o=n?new So(n):null;"value"===t?r=new $o(o):t&&(r=new Ho(t,o)),co(e._repo,e,r)}var Xo=function(){},ei=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Or("endAt",this._value,e._path,!0);var t=xt(e._queryParams,this._value,this._key);if(Po(t),Ao(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)},t}(Xo);function ti(e,t){return jr("endAt","key",t,!0),new ei(e,t)}var ni=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Or("endBefore",this._value,e._path,!1);var t,n,r,o,i=(t=e._queryParams,n=this._value,r=this._key,t.index_===Me?("string"==typeof n&&(n=ft(n)),o=xt(t,n,r)):o=xt(t,n,null==r?I:ft(r)),o.endBeforeSet_=!0,o);if(Po(i),Ao(i),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(e._repo,e._path,i,e._orderByCalled)},t}(Xo);function ri(e,t){return jr("endBefore","key",t,!0),new ni(e,t)}var oi=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Or("startAt",this._value,e._path,!0);var t=wt(e._queryParams,this._value,this._key);if(Po(t),Ao(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)},t}(Xo);function ii(e,t){return void 0===e&&(e=null),jr("startAt","key",t,!0),new oi(e,t)}var ai=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Or("startAfter",this._value,e._path,!1);var t,n,r,o,i=(t=e._queryParams,n=this._value,r=this._key,t.index_===Me?("string"==typeof n&&(n=ht(n)),o=wt(t,n,r)):o=wt(t,n,null==r?A:ht(r)),o.startAfterSet_=!0,o);if(Po(i),Ao(i),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new To(e._repo,e._path,i,e._orderByCalled)},t}(Xo);function si(e,t){return jr("startAfter","key",t,!0),new ai(e,t)}var ci=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,a.ZT)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),e._orderByCalled);var t,n,r},t}(Xo);function li(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ci(e)}var ui=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,a.ZT)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),e._orderByCalled);var t,n,r},t}(Xo);function di(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ui(e)}var pi=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Io(e,"orderByChild");var t=new pe(this._path);if(Ce(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new lt(t),r=kt(e._queryParams,n);return Ao(r),new To(e._repo,e._path,r,!0)},t}(Xo);function hi(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zr("orderByChild","path",e,!1),new pi(e)}var fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Io(e,"orderByKey");var t=kt(e._queryParams,Me);return Ao(t),new To(e._repo,e._path,t,!0)},t}(Xo);function mi(){return new fi}var vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Io(e,"orderByPriority");var t=kt(e._queryParams,Je);return Ao(t),new To(e._repo,e._path,t,!0)},t}(Xo);function gi(){return new vi}var yi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype._apply=function(e){Io(e,"orderByValue");var t=kt(e._queryParams,ut);return Ao(t),new To(e._repo,e._path,t,!0)},t}(Xo);function _i(){return new yi}var bi=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.ZT)(t,e),t.prototype._apply=function(e){if(Or("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ei(this._value,this._key)._apply(new oi(this._value,this._key)._apply(e))},t}(Xo);function Ci(e,t){return jr("equalTo","key",t,!0),new bi(e,t)}function Ei(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=(0,i.m9)(e);try{for(var c=(0,a.XA)(r),l=c.next();!l.done;l=c.next()){var u=l.value;s=u._apply(s)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return s}!function(e){(0,i.hu)(!Pn,"__referenceConstructor has already been defined"),Pn=e}(Lo),function(e){(0,i.hu)(!Fn,"__referenceConstructor has already been defined"),Fn=e}(Lo);var wi={},xi=!1;function ki(e,t,n,r,o){var i=r||e.options.databaseURL;void 0===i&&(e.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",e.options.projectId),i=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=Eo(i,o),c=s.repoInfo,l=void 0;"undefined"!=typeof process&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(a=!0,i="http://"+l+"?ns="+c.namespace,c=(s=Eo(i,o)).repoInfo):a=!s.repoInfo.secure;var u=o&&a?new $($.OWNER):new B(e.name,e.options,t);Br("Invalid Firebase Database URL",s),Ce(s.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var d=function(e,t,n,r){var o=wi[t.name];o||(o={},wi[t.name]=o);var i=o[e.toURLString()];return i&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Jr(e,xi,n,r),o[e.toURLString()]=i,i}(c,e,u,new U(e.name,n));return new Si(d,e)}var Si=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(function(e,t,n){if(e.stats_=X(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Tt(e.repoInfo_,(function(t,n,r,o){to(e,t,n,r,o)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return no(e,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,i.Pz)(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Re(e.repoInfo_,t,(function(t,n,r,o){to(e,t,n,r,o)}),(function(t){no(e,t)}),(function(t){!function(e,t){q(t,(function(t,n){ro(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}var r,o;e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=(r=function(){return new qt(e.stats_,e.server_)},o=e.repoInfo_.toString(),J[o]||(J[o]=r()),J[o]),e.infoData_=new It,e.infoSyncTree_=new Qn({startListening:function(t,n,r,o){var i=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(i=Jn(e.infoSyncTree_,t._path,a),setTimeout((function(){o("ok")}),0)),i},stopListening:function(){}}),ro(e,"connected",!1),e.serverSyncTree_=new Qn({startListening:function(t,n,r,o){return e.server_.listen(t,r,n,(function(n,r){var i=o(n,r);Yr(e.eventQueue_,t._path,i)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Lo(this._repo,he())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){var e,t,n;return null!==this._rootInternal&&(e=this._repo,t=this.app.name,(n=wi[t])&&n[e.key]===e||S("Database "+t+"("+e.repoInfo_+") has already been deleted."),lo(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&S("Cannot call "+e+" on a deleted database.")},e}();function Ni(e){(e=(0,i.m9)(e))._checkNotDeleted("goOffline"),lo(e._repo)}function Ti(e){var t;(e=(0,i.m9)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Zr)}var Ii={".sv":"timestamp"},Ai=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function Pi(e,t,n){var r;if(e=(0,i.m9)(e),Ur("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,a=new i.BH,s=Go(e,(function(){}));return function(t,n,r,o,s,c){uo(t,"transaction on "+n);var l={path:n,update:r,onComplete:function(t,n,r){var o=null;t?a.reject(t):(o=new Ro(r,new Lo(e._repo,e._path),Je),a.resolve(new Ai(n,o)))},status:null,order:g(),applyLocally:c,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ho(t,n,void 0);l.currentInputSnapshot=u;var d=l.update(u.val());if(void 0===d)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{qr("transaction failed: Data returned ",d,l.path),l.status=0;var p=Cr(t.transactionQueueTree_,n),h=Er(p)||[];h.push(l),wr(p,h);var f=void 0;"object"==typeof d&&null!==d&&(0,i.r3)(d,".priority")?(f=(0,i.DV)(d,".priority"),(0,i.hu)(Dr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(tr(t.serverSyncTree_,n)||ot.EMPTY_NODE).getPriority().val();var m=eo(t),v=at(d,f),y=yr(v,u,m);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=y,l.currentWriteId=oo(t);var _=Kn(t.serverSyncTree_,n,y,l.currentWriteId,l.applyLocally);Yr(t.eventQueue_,n,_),fo(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,s,o),a.promise}var Li=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){(0,i.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,i.Wj)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){(0,i.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,i.Wj)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){(0,i.Dv)("OnDisconnect.set",1,2,arguments.length),(0,i.Wj)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){(0,i.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,i.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if((0,i.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,N("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,i.Wj)("OnDisconnect.update","onComplete",t,!0);var o=this._delegate.update(e);return t&&o.then((function(){return t(null)}),(function(e){return t(e)})),o},e}(),Ri=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,i.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Di=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return(0,i.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return(0,i.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return(0,i.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return(0,i.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return(0,i.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),zr("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return(0,i.Dv)("DataSnapshot.hasChild",1,1,arguments.length),zr("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return(0,i.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return(0,i.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,i.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return(0,i.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,i.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return(0,i.Dv)("DataSnapshot.ref",0,0,arguments.length),new qi(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Oi=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,o){var a,s=this;(0,i.Dv)("Query.on",2,4,arguments.length),(0,i.Wj)("Query.on","callback",n,!1);var c=e.getCancelAndContextArgs_("Query.on",r,o),l=function(e,t){n.call(c.context,new Di(s.database,e),t)};l.userCallback=n,l.context=c.context;var u=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(t){case"value":return Go(this._delegate,l,u),n;case"child_added":return Yo(this._delegate,l,u),n;case"child_removed":return Zo(this._delegate,l,u),n;case"child_changed":return Qo(this._delegate,l,u),n;case"child_moved":return Ko(this._delegate,l,u),n;default:throw new Error((0,i.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if((0,i.Dv)("Query.off",0,3,arguments.length),Wr("Query.off",e,!0),(0,i.Wj)("Query.off","callback",t,!0),(0,i.lb)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Jo(this._delegate,e,r)}else Jo(this._delegate,e)},e.prototype.get=function(){var e=this;return Bo(this._delegate).then((function(t){return new Di(e.database,t)}))},e.prototype.once=function(t,n,r,o){var a=this;(0,i.Dv)("Query.once",1,4,arguments.length),(0,i.Wj)("Query.once","callback",n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,o),c=new i.BH,l=function(e,t){var r=new Di(a.database,e);n&&n.call(s.context,r,t),c.resolve(r)};l.userCallback=n,l.context=s.context;var u=function(e){s.cancel&&s.cancel.call(s.context,e),c.reject(e)};switch(t){case"value":Go(this._delegate,l,u,{onlyOnce:!0});break;case"child_added":Yo(this._delegate,l,u,{onlyOnce:!0});break;case"child_removed":Zo(this._delegate,l,u,{onlyOnce:!0});break;case"child_changed":Qo(this._delegate,l,u,{onlyOnce:!0});break;case"child_moved":Ko(this._delegate,l,u,{onlyOnce:!0});break;default:throw new Error((0,i.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},e.prototype.limitToFirst=function(t){return(0,i.Dv)("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ei(this._delegate,li(t)))},e.prototype.limitToLast=function(t){return(0,i.Dv)("Query.limitToLast",1,1,arguments.length),new e(this.database,Ei(this._delegate,di(t)))},e.prototype.orderByChild=function(t){return(0,i.Dv)("Query.orderByChild",1,1,arguments.length),new e(this.database,Ei(this._delegate,hi(t)))},e.prototype.orderByKey=function(){return(0,i.Dv)("Query.orderByKey",0,0,arguments.length),new e(this.database,Ei(this._delegate,mi()))},e.prototype.orderByPriority=function(){return(0,i.Dv)("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ei(this._delegate,gi()))},e.prototype.orderByValue=function(){return(0,i.Dv)("Query.orderByValue",0,0,arguments.length),new e(this.database,Ei(this._delegate,_i()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),(0,i.Dv)("Query.startAt",0,2,arguments.length),new e(this.database,Ei(this._delegate,ii(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),(0,i.Dv)("Query.startAfter",0,2,arguments.length),new e(this.database,Ei(this._delegate,si(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),(0,i.Dv)("Query.endAt",0,2,arguments.length),new e(this.database,Ei(this._delegate,ti(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),(0,i.Dv)("Query.endBefore",0,2,arguments.length),new e(this.database,Ei(this._delegate,ri(t,n)))},e.prototype.equalTo=function(t,n){return(0,i.Dv)("Query.equalTo",1,2,arguments.length),new e(this.database,Ei(this._delegate,Ci(t,n)))},e.prototype.toString=function(){return(0,i.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return(0,i.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if((0,i.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,i.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,i.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,i.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new qi(this.database,new Lo(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),qi=function(e){function t(t,n){var r=e.call(this,t,new To(n._repo,n._path,new Et,!1))||this;return r.database=t,r._delegate=n,r}return(0,a.ZT)(t,e),t.prototype.getKey=function(){return(0,i.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return(0,i.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,qo(this._delegate,e))},t.prototype.getParent=function(){(0,i.Dv)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return(0,i.Dv)("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){(0,i.Dv)("Reference.set",1,2,arguments.length),(0,i.Wj)("Reference.set","onComplete",t,!0);var n=Wo(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if((0,i.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,N("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ur("Reference.update",this._delegate._path),(0,i.Wj)("Reference.update","onComplete",t,!0);var o=Uo(this._delegate,e);return t&&o.then((function(){return t(null)}),(function(e){return t(e)})),o},t.prototype.setWithPriority=function(e,t,n){(0,i.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,i.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=zo(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){(0,i.Dv)("Reference.remove",0,1,arguments.length),(0,i.Wj)("Reference.remove","onComplete",e,!0);var t=Fo(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;(0,i.Dv)("Reference.transaction",1,3,arguments.length),(0,i.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,i.Wj)("Reference.transaction","onComplete",t,!0),$r("Reference.transaction","applyLocally",n,!0);var o=Pi(this._delegate,e,{applyLocally:n}).then((function(e){return new Ri(e.committed,new Di(r.database,e.snapshot))}));return t&&o.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),o},t.prototype.setPriority=function(e,t){(0,i.Dv)("Reference.setPriority",1,2,arguments.length),(0,i.Wj)("Reference.setPriority","onComplete",t,!0);var n=jo(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;(0,i.Dv)("Reference.push",0,2,arguments.length),(0,i.Wj)("Reference.push","onComplete",n,!0);var o=Mo(this._delegate,e),a=o.then((function(e){return new t(r.database,e)}));n&&a.then((function(){return n(null)}),(function(e){return n(e)}));var s=new t(this.database,o);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},t.prototype.onDisconnect=function(){return Ur("Reference.onDisconnect",this._delegate._path),new Li(new No(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Oi),Mi=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={}),(e=(0,i.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var o=e._repoInternal,a=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new $($.OWNER);else if(r.mockUserToken){var s=(0,i.Sg)(r.mockUserToken,e.app.options.projectId);a=new $(s)}!function(e,t,n,r){e.repoInfo_=new Y(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(o,t,n,a)}(this._delegate,e,t,n)},e.prototype.ref=function(e){if((0,i.Dv)("database.ref",0,1,arguments.length),e instanceof qi){var t=Oo(this._delegate,e.toString());return new qi(this,t)}return t=Do(this._delegate,e),new qi(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";(0,i.Dv)(t,1,1,arguments.length);var n=Oo(this._delegate,e);return new qi(this,n)},e.prototype.goOffline=function(){return(0,i.Dv)("database.goOffline",0,0,arguments.length),Ni(this._delegate)},e.prototype.goOnline=function(){return(0,i.Dv)("database.goOnline",0,0,arguments.length),Ti(this._delegate)},e.ServerValue={TIMESTAMP:Ii,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}},e}(),Fi=Object.freeze({__proto__:null,forceLongPolling:function(){ae.forceDisallow(),re.forceAllow()},forceWebSockets:function(){re.forceDisallow()},isWebSocketsAvailable:function(){return ae.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var n;t?(e.statsListener_||(e.statsListener_=new Ot(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);q(n,(function(e,t){for(var n=e,o=e.length;o<r+2;o++)n+=" ";console.log(n+t)}))}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n;e.stats_.incrementCounter(t),n=t,e.statsReporter_.statsToReport_[n]=!0}(e._delegate._repo,t)},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e._delegate._repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,s=e.nodeAdmin,c=void 0!==s&&s;l(r);var u=new o.zt("auth-internal",new o.H0("database-standalone"));return u.setComponent(new o.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Mi(ki(t,u,void 0,n,c),t),namespace:a}}}),Wi=Re;Re.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Re.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ji=ce,zi=Y,Ui=Object.freeze({__proto__:null,DataConnection:Wi,RealTimeConnection:ji,hijackHash:function(e){var t=Re.prototype.put;return Re.prototype.put=function(n,r,o,i){void 0!==i&&(i=e()),t.call(this,n,r,o,i)},function(){Re.prototype.put=t}},ConnectionTarget:zi,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){!function(e){xi=e}(e)}}),Bi=Mi.ServerValue;!function(t){l(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new o.wA("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Mi(ki(r,o,i,n),r)}),"PUBLIC").setServiceProps({Reference:qi,Query:Oi,Database:Mi,DataSnapshot:Di,enableLogging:E,INTERNAL:Fi,ServerValue:Bi,TEST_ACCESS:Ui}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.10.9"),(0,i.Yr)()&&(e.exports=n)}(r.Z)},4594:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var o;n.d(t,{in:()=>i,Yd:()=>d,Ub:()=>p,Am:()=>h});var i,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},c=i.INFO,l=((o={})[i.DEBUG]="log",o[i.VERBOSE]="log",o[i.INFO]="info",o[i.WARN]="warn",o[i.ERROR]="error",o),u=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var i=(new Date).toISOString(),a=l[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+i+"]  "+e.name+":"],n))}},d=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=u,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,i.DEBUG],e)),this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,i.VERBOSE],e)),this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,i.INFO],e)),this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,i.WARN],e)),this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,i.ERROR],e)),this._logHandler.apply(this,r([this,i.ERROR],e))},e}();function p(e){a.forEach((function(t){t.setLogLevel(e)}))}function h(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=o.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:s,args:o,type:t.name})}},r=0,o=a;r<o.length;r++)n(o[r])}},4589:(e,t,n)=>{"use strict";n.d(t,{BH:()=>p,LL:()=>b,gQ:()=>R,hu:()=>o,g5:()=>i,US:()=>s,h$:()=>c,r3:()=>T,Sg:()=>h,ne:()=>D,p$:()=>u,ZB:()=>d,gK:()=>F,m9:()=>B,GJ:()=>N,jU:()=>v,xb:()=>A,uI:()=>f,UG:()=>m,Yr:()=>y,b$:()=>g,w9:()=>S,cI:()=>w,UI:()=>P,xO:()=>L,DV:()=>I,ug:()=>U,dS:()=>z,Pz:()=>x,Dv:()=>M,Wj:()=>W,lb:()=>j});var r=n(655),o=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var i=e[o],a=o+1<e.length,s=a?e[o+1]:0,c=o+2<e.length,l=c?e[o+2]:0,u=i>>2,d=(3&i)<<4|s>>4,p=(15&s)<<2|l>>6,h=63&l;c||(h=64,a||(p=64)),r.push(n[u],n[d],n[p],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){var a=((7&o)<<18|(63&(i=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{i=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<e.length;){var i=n[e.charAt(o++)],a=o<e.length?n[e.charAt(o)]:0,s=++o<e.length?n[e.charAt(o)]:64,c=++o<e.length?n[e.charAt(o)]:64;if(++o,null==i||null==a||null==s||null==c)throw Error();var l=i<<2|a>>4;if(r.push(l),64!==s){var u=a<<4&240|s>>2;if(r.push(u),64!==c){var d=s<<6&192|c;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){var t=a(e);return s.encodeByteArray(t,!0)},l=function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function u(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=d(e[n],t[n]));return e}var p=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function h(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",o=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),s.encodeString(JSON.stringify(a),!1),""].join(".")}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function m(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function v(){return"object"==typeof self&&self.self===self}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return!1}var _=function(e){function t(n,r,o){var i=e.call(this,r)||this;return i.code=n,i.customData=o,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,b.prototype.create),i}return(0,r.ZT)(t,e),t}(Error),b=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},o=this.service+"/"+e,i=this.errors[e],a=i?C(i,r):"Error",s=this.serviceName+": "+a+" ("+o+").",c=new _(o,s,r);return c},e}();function C(e,t){return e.replace(E,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var E=/\{\$([^}]+)}/g;function w(e){return JSON.parse(e)}function x(e){return JSON.stringify(e)}var k=function(e){var t={},n={},r={},o="";try{var i=e.split(".");t=w(l(i[0])||""),n=w(l(i[1])||""),o=i[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:o}},S=function(e){var t=k(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},N=function(e){var t=k(e).claims;return"object"==typeof t&&!0===t.admin};function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function A(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function P(e,t,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}function L(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,o=Object.entries(e);r<o.length;r++){var i=o[r];n(i[0],i[1])}return t.length?"&"+t.join("&"):""}var R=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var o=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(o<<1|o>>>31)}var i,a,s=this.chain_[0],c=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(i=u^c&(l^u),a=1518500249):(i=c^l^u,a=1859775393):r<60?(i=c&l|u&(c|l),a=2400959708):(i=c^l^u,a=3395469782),o=(s<<5|s>>>27)+i+d+a+n[r]&4294967295,d=u,u=l,l=4294967295&(c<<30|c>>>2),c=s,s=o;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,i=this.inbuf_;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[i]=e.charCodeAt(r),++r,++i===this.blockSize){this.compress_(o),i=0;break}}else for(;r<t;)if(o[i]=e[r],++r,++i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[n]>>o&255,++r;return e},e}();function D(e,t){var n=new O(e,t);return n.subscribe.bind(n)}var O=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var o=r[n];if(o in e&&"function"==typeof e[o])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}})),this.observers.push(r),i},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function q(){}var M=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")};function F(e,t){return e+" failed: "+t+" argument "}function W(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(F(e,t)+"must be a valid function.")}function j(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(F(e,t)+"must be a valid context object.")}var z=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},U=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function B(e){return e&&e._delegate?e._delegate:e}},4822:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,"#level-select{\n    width: 100%;\n    height: 100%;\n    position: absolute;\n}\n\n#level-select-title{\n    display: block;\n    width: 55%;\n    margin: 0 auto 0 auto;\n    padding-top: 20px;\n}\n\n#button-container-outer{\n    width: 55%;\n    min-width: 500px;\n    max-height: 70%;\n    position: absolute;\n    left: 50%;\n    bottom: 5%;\n}\n\n#button-container{\n    width: 100%;\n    max-width: 100%;\n    max-height: 100%;\n    position: relative;\n    left: -50%;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 45px;\n}\n\n@media(max-width: 800px){\n    #button-container{\n        gap: 20px;\n    }\n}\n\n.level-select-button-outer{\n    position: relative;\n    width: 17%;\n    max-height: 30%;\n}\n\n.level-button{\n    position: relative;\n    width: 100%;\n    top: 0;\n    left: 0;\n}\n\n.level-select-star-container{\n    position: absolute;\n    bottom: 0.5rem;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    gap: 0.2rem;\n}\n\n.level-select-star{\n    width: 20%;\n}\n\n.unlocked-level-outer:hover{\n    transform: scale(1.05);\n    cursor: pointer;\n}\n\n#settings-button{\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 5%;\n}\n\n#settings-button:hover{\n    transform: scale(1.05);\n    cursor: pointer;\n}\n\n#level-select-settings-container{\n    width: 50vw;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    background-color: #fe934bde;\n    padding: 4rem 2rem;\n    border-radius: 20px;\n    animation: slideInFromTop 0.5s ease-in-out;\n}\n\n#level-select-settings-title{\n    font-size: 5rem;\n    margin-bottom: 5rem;\n}\n\n#level-select-icon-container{\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    gap: 3rem;\n}\n\n#level-select-settings-container img{\n    width: 6rem;\n    height: 6rem;\n}\n\n#level-select-settings-container img:hover{\n    transform: scale(1.1);\n    cursor: pointer;\n}",""]);const i=o},8261:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@500&display=swap);"]),o.push([e.id,'*{\n    font-family: \'Josefin Sans\', sans-serif;\n}\n\n#outer-container{\n    width: 100vw;\n    height: 100vh;\n    background-color: #58a251;\n    position: absolute;\n    overflow: none;\n    z-index: -1;\n}\n\n#score-display{\n    font-size: 2rem;\n    top: 1.1rem;\n    left: 1.6rem;\n    position: absolute;\n}\n\n#star-container{\n    width: fit-content;\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    margin: 0.3rem auto;\n}\n\n.star{\n    width: 3rem;\n    height: 3rem;\n    max-height: 9vh;\n}\n\n#level-restart-button{\n    width: 3.5rem;\n    height: 3.5rem;\n    top: 1.1rem;\n    right: 6.1rem;\n    position: absolute;\n}\n\n#level-restart-button:hover{\n    transform: scale(1.1);\n    cursor: pointer;\n}\n\n#settings{\n    width: 3.5rem;\n    height: 3.5rem;\n    top: 1.1rem;\n    right: 1.6rem;\n    position: absolute;\n}\n\n#settings:hover{\n    transform: scale(1.1);\n    cursor: pointer;\n}\n\n#equal-sign{\n    position: absolute;\n    top: 50%;\n    transform: translate(0, -50%);\n    right: 7rem;\n    font-size: 5rem;\n}\n\n#fraction-container{\n    position: absolute;\n    top: 50%;\n    transform: translate(0, -50%);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    right: 1rem;\n}\n\n#fraction-container p{\n    font-size: 5rem;\n}\n\n@media(max-width: 1250px){\n    #fraction-container{\n        right: 0.5rem;\n    }\n\n    #fraction-container p{\n        font-size: 4rem;\n    }\n\n    #equal-sign{\n        right: 5rem;\n        font-size: 3.5rem;\n    }\n}\n\n#fraction-container #fraction-bar{\n    width: 100%;\n    height: 0.5rem;\n    background-color: black;\n    color: black;\n    border: none;\n}\n\n#game-container{\n    width: 75vw;\n    height: 80vh;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    background: #22b14c;\n    /* background: #22b14c url("../images/background-grass.png") repeat 0 0/10%; */\n    border-radius: 40px;\n}\n\n.level-popup{\n    position: absolute;\n    background-color: #f5e2e2de;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 40%;\n    margin: auto;\n    z-index: 2;\n    text-align: center;\n    padding: 1.5rem 4rem;\n    border-radius: 20px;\n    animation: slideInFromTop 0.5s ease-in-out;\n}\n\n.level-popup img{\n    width: 2.7rem;\n    height: 2.7rem;\n}\n\n.level-popup h2{\n    font-size: 3rem;\n}\n\n.level-popup .star-outer-container{\n    margin-top: 2rem;\n    display: flex;\n    justify-content: space-between;\n}\n\n.level-popup p{\n    font-size: 2rem;\n}\n\n.level-popup #level-1-help-text{\n    font-size: 1.5rem;\n    margin-top: 0.5rem;\n}\n\n.level-button-container{\n    margin-top: 1.8rem;\n    display: flex;\n    gap: 1rem;\n    justify-content: flex-end;\n}\n\n.level-popup-button{\n    font-size: 1.2rem;\n    padding: 0.7rem 1rem;\n    background-color: #babad4;\n    border: none;\n    border-radius: 15px;\n    margin-right: auto;\n}\n\n.level-popup-button:hover{\n    cursor: pointer;\n    background-color: #9a9acf;\n}\n\n.level-button-container img{\n    width: 3rem;\n    height: 2.8rem;\n}\n\n.level-button-container img:hover{\n    cursor: pointer;\n    transform: scale(1.1);\n}\n\n.game-end-container .game-end-level{\n    text-align: left;\n    margin-bottom: 2rem;\n}\n\n.game-end-container h2{\n    margin-bottom: 2.5rem;\n}\n\n#game-end-star-container{\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    gap: 1rem;\n    margin-bottom: 3rem;\n}\n\n#game-end-star-container img{\n    width: 6rem;\n    height: 6rem;\n}\n\n.goal-popup{\n    background-color: #f5e2e2de;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 100%;\n    padding: 2rem 0;\n    text-align: center;\n}\n\n.goal-popup-text{\n    font-size: 3rem;\n    animation: slideInFromLeft 2s ease-in-out;\n}\n\n#goal-popup-incorrect{\n    background-color: #e08282de;\n}\n\n.pillar{\n    background-repeat: no-repeat;\n    /* background: #404344 url("../images/pillar.png") repeat center/10rem; */\n}\n\n.center-wall{\n    background: #58a251;\n}\n\n.hole{\n    box-sizing: border-box;\n    background-color: #443d3d;\n    border: 8px solid #4c824c;\n}\n\n#ball-separate-line{\n    position: absolute;\n    height: 10px;\n    width: 12.5vw;\n    background: #22b14c;\n    top: 50%;\n    transform: translate(0, -50%);\n}\n\n#timer{\n    font-size: 3rem;\n    position: absolute;\n    bottom: 1rem;\n    right: 1rem;\n}\n\n@keyframes slideInFromTop{\n\n    0%{\n        margin-top: -70px;\n        opacity: 0%;\n    }\n\n    100%{\n        margin-top: 0px;\n        opacity: 100%;\n    }\n\n}\n\n@keyframes slideOutToBottom{\n\n    0%{\n        margin-top: 0px;\n        opacity: 100%;\n    }\n\n    100%{\n        margin-top: 70px;\n        opacity: 0%;\n    }\n\n}\n\n@keyframes slideInFromLeft{\n\n    0%{\n        margin-left: -150vw;\n        opacity: 0%;\n    }\n\n    25%{\n        opacity: 100%;\n        margin-left: -20rem;\n    }\n\n    75%{\n        opacity: 100%;\n        margin-right: -20rem;\n    }\n\n    100%{\n        opacity: 0%;\n        margin-right: -150vw;\n    }\n\n}',""]);const i=o},28:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@500&display=swap);"]),o.push([e.id,"*{\n    margin: 0;\n    padding: 0;\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                        supported by Chrome, Edge, Opera and Firefox */\n    font-family: 'Josefin Sans', sans-serif;\n}\n\nhtml{\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\nbody{\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\nmain{\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\n#background{\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n}\n\n.background-block{\n    position: relative;\n    width: 200vw;\n    height: 50vh;\n    opacity: 0%;\n}\n\n.dark-green{\n    background-color: #014800;\n}\n\n.med-green{\n    background-color: #05833a;\n}\n\n.light-green{\n    background-color: #80db58;\n}\n\n#first-block{\n    transform: rotate(-28deg);\n    margin-top: 500px;\n    margin-left: 800px;\n}\n\n#second-block{\n    transform: rotate(20deg);\n    margin-top: 600px;\n    margin-left: 500px;\n}\n\n#third-block{\n    transform: rotate(-28deg);\n    margin-top: 500px;\n    margin-left: 300px;\n}\n\n#fourth-block{\n    transform: rotate(-50deg);\n}\n\n#fifth-block{\n    transform: rotate(-28deg);\n}\n\n@keyframes blockAnimation{\n\n    from{\n        opacity: 0%;\n    }\n\n    to{\n        margin-top: 0;\n        margin-left: 0;\n        margin-bottom: 0;\n        margin-right: 0;\n        transform: rotate(-28deg) translate(-20%, -210%);\n        opacity: 100%;\n    }\n\n}\n\n#fraction{\n    position: absolute;\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    right: 0;\n    top: 8%;\n    text-align: center;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    width: 60%;\n}\n\n#frac{\n    position: absolute;\n    width: 45%;\n    height: 70%;\n    bottom: 40%;\n    left: 0;\n    align-self: start;\n}\n\n#bar{\n    width: 20%;\n    height: 50%;\n    position: relative;\n    left: 40%;\n    top: 15%;\n    align-self: center;\n}\n\n#tion{\n    position: absolute;\n    width: 45%;\n    height: 70%;\n    right: 0;\n    top: 40%;\n}\n\n#frac:hover{\n    animation: frac 0.3s ease-out 1 forwards;\n}\n\n#tion:hover{\n    animation: tion 0.3s ease-out 1 forwards;\n}\n\n@keyframes frac{\n\n    from{\n        opacity: 0%;\n        left: -8%;\n    }\n\n    to{\n        opacity: 100%;\n        left: 0;\n    }\n\n}\n\n@keyframes tion{\n\n    from{\n        opacity: 0%;\n        right: 8%;\n    }\n\n    to{\n        opacity: 100%;\n        right: 0;\n    }\n\n}\n\n#golf{\n    position: absolute;\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    right: 3%;\n    top: 47%;\n    text-align: center;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    width: 37%;\n    height: 27%;\n}\n\n#golf img{\n    width: 25%;\n    height: 100%;\n}\n\n#golf :not(:last-child){\n    margin-right: -2%;\n}\n\n#golf #l{\n    margin-left: -1%;\n}\n\n#golf img:hover{\n    animation: golf 0.4s ease-out 1 forwards;\n}\n\n@keyframes golf{\n\n    0%{\n        margin-top: -10%;\n        opacity: 0%;\n    }\n\n    40%{\n        margin-top: 5%;\n        opacity: 100%;\n    }\n\n    60%{\n        margin-top: -3%;\n    }\n\n    70%{\n        margin-top: 2%;\n    }\n\n    85%{\n        margin-top: -1%;\n    }\n\n    100%{\n        margin-top: 0%;\n        opacity: 100%;\n    }\n\n}\n\n#start{\n    position: absolute;\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    right: 8%;\n    top: 76%;\n    text-align: center;\n    width: 34%;\n    height: 22%;\n}\n\n#start #button{\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n@keyframes button{\n    from{\n        top: 15%;\n        opacity: 0%;\n    }\n\n    to{\n        top: 0%;\n        opacity: 100%;\n    }\n}\n\n#start #text{\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n#start:hover{\n    cursor: pointer;\n    top: 75%;\n    width: 36%;\n    height: 24%;\n}\n\n.noselect {\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                          supported by Chrome, Edge, Opera and Firefox */\n}\n\nsvg{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    min-height: 100%;\n}\n\nline{\n    stroke-width: 5;\n    stroke: black;\n    z-index: 2;\n}\n\n#dashed-line{\n    stroke-dasharray: 4;\n    z-index: 2;\n}\n\n#sign-in-container{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    gap: 2rem;\n    background-color: #aaccae;\n    border-radius: 2rem;\n    padding: 5rem 3rem;\n    animation: slideInFromTop 0.5s ease-in-out;\n}\n\n#sign-in-container .sign-in-button{\n    margin-bottom: 2rem;\n    font-size: 3rem;\n    border: 1px solid #c59d9d;\n    padding: 1rem 1.5rem;\n    border-radius: 1.5rem;\n    background-color: #ef4d58;\n}\n\n#sign-in-container .sign-in-button:hover{\n    background-color: #c17a6f;\n    cursor: pointer;\n}\n\n#sign-in-container .sign-in-user-label{\n    font-size: 2rem;\n}\n\n#sign-in-container .sign-in-user-name{\n    font-size: 1.7rem;\n    border-radius: 20px;\n    padding: 0.5rem 0.7rem;\n}\n\ninput:focus, textarea:focus, select:focus{\n    outline: none;\n}\n\n#sign-in-container .sign-in-help-text{\n    margin-top: 2rem;\n    color: red;\n}\n\n#sign-in-container .enter-game-button{\n    width: fit-content;\n    font-size: 1.8rem;\n    margin: 3rem auto 0 auto;\n    padding: 0.8rem 1rem;\n    border-radius: 20px;\n    background-color: #83a8ce;\n}\n\n#sign-in-container .enter-game-button:hover{\n    background-color: #769fab;\n    cursor: pointer;\n}",""]);const i=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],u=i[l]||0,d="".concat(l," ").concat(u);i[l]=u+1;var p=n(d),h={css:c[1],media:c[2],sourceMap:c[3]};-1!==p?(t[p].references++,t[p].updater(h)):t.push({identifier:d,updater:o(h,r),references:1}),a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=r(e,o),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},6655:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},655:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>o,pi:()=>i,mG:()=>a,Jh:()=>s,XA:()=>c,CR:()=>l,ev:()=>u});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function u(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}Object.create,Object.create},6104:e=>{var t="undefined"!=typeof process&&process.pid?process.pid.toString(36):"";function n(){var e=Date.now(),t=n.last||e;return n.last=e>t?e:t+1}e.exports=e.exports.default=function(e,r){return(e||"")+""+t+n().toString(36)+(r||"")},e.exports.process=function(e,r){return(e||"")+t+n().toString(36)+(r||"")},e.exports.time=function(e,t){return(e||"")+n().toString(36)+(t||"")}},5345:(e,t,n)=>{"use strict";e.exports=n.p+"0bbabb2df8bc193a7233.png"},6450:(e,t,n)=>{"use strict";e.exports=n.p+"f67bf2eb8b4f24cab2a7.png"},211:(e,t,n)=>{"use strict";e.exports=n.p+"27f72c94b426901c504a.png"},9507:(e,t,n)=>{"use strict";e.exports=n.p+"79d8be77cf05e2aa5b3d.png"},5142:(e,t,n)=>{"use strict";e.exports=n.p+"19f921054570e2b26da6.png"},985:(e,t,n)=>{"use strict";e.exports=n.p+"6f4cf76301c3c7590148.png"},2464:(e,t,n)=>{"use strict";e.exports=n.p+"84b2f3eee3d067dc7197.png"},7313:(e,t,n)=>{"use strict";e.exports=n.p+"f568629ca3811907221e.png"},8438:(e,t,n)=>{"use strict";e.exports=n.p+"7ee6c5d1f3382381d419.png"},3287:(e,t,n)=>{"use strict";e.exports=n.p+"6bb1f97922a5d4edba43.png"},6992:(e,t,n)=>{"use strict";e.exports=n.p+"5845703f03031d4a714d.png"},9979:(e,t,n)=>{"use strict";e.exports=n.p+"6b25688b397f715596e8.png"},5349:(e,t,n)=>{"use strict";e.exports=n.p+"1c95b85d86a7c25b6f3c.png"},836:(e,t,n)=>{"use strict";e.exports=n.p+"bad3fb39ebd32b934cf0.png"},8363:(e,t,n)=>{"use strict";e.exports=n.p+"e14d8220ee6a672afd11.png"},3494:(e,t,n)=>{"use strict";e.exports=n.p+"5d7a63b18e9985a9fb8e.png"},532:(e,t,n)=>{"use strict";e.exports=n.p+"0f1911dbfa83bf74ab26.png"},5:(e,t,n)=>{"use strict";e.exports=n.p+"fe4f6a8a57f5304768d5.png"},62:(e,t,n)=>{"use strict";e.exports=n.p+"387d5b7ac8b85225f293.png"},621:(e,t,n)=>{"use strict";e.exports=n.p+"5f3afd1c7776a3015819.png"},3414:(e,t,n)=>{"use strict";e.exports=n.p+"68a16ac485fc96e5e9ef.png"},3636:(e,t,n)=>{"use strict";e.exports=n.p+"b3d0a306f257fff2d220.png"},3804:(e,t,n)=>{"use strict";e.exports=n.p+"30fbd70f7202273ebe93.png"},9788:(e,t,n)=>{"use strict";e.exports=n.p+"ce4f3f0dd42c60ae02b7.png"},9978:(e,t,n)=>{"use strict";e.exports=n.p+"2b65b55f15ab50dd84bd.png"},3090:(e,t,n)=>{"use strict";e.exports=n.p+"171443f4183ce931421a.png"},4275:(e,t,n)=>{"use strict";e.exports=n.p+"986c107e43c0a3d6e683.png"},7518:(e,t,n)=>{"use strict";e.exports=n.p+"e358cbacbcac58652ae2.png"},4625:(e,t,n)=>{"use strict";e.exports=n.p+"891db67bca13bf41c229.png"},92:(e,t,n)=>{"use strict";e.exports=n.p+"39f937d4173a3a779ea7.png"},4408:(e,t,n)=>{"use strict";e.exports=n.p+"e3ef5542ef739d7e6c2b.png"},8850:(e,t,n)=>{"use strict";e.exports=n.p+"bd1ce58f83ba76edc3cd.png"},3201:(e,t,n)=>{"use strict";e.exports=n.p+"6543f4f6ce5ed948dac5.png"},3267:(e,t,n)=>{"use strict";e.exports=n.p+"d7002962c41942a74ddb.png"},6726:(e,t,n)=>{"use strict";e.exports=n.p+"e4456e7891c9417db294.png"},4243:(e,t,n)=>{"use strict";e.exports=n.p+"21903e963379ff1cd41b.png"},7737:(e,t,n)=>{"use strict";e.exports=n.p+"3a12d3deee896d1eee04.png"},7162:(e,t,n)=>{"use strict";e.exports=n.p+"e1a8bb83e6f202f7882f.png"},6537:(e,t,n)=>{"use strict";e.exports=n.p+"89ad9489aac0059deaa3.png"},6438:(e,t,n)=>{"use strict";e.exports=n.p+"dcec27a39d683a539648.png"},5515:(e,t,n)=>{"use strict";e.exports=n.p+"90d14ed71da5f4d80b9a.png"},1272:(e,t,n)=>{"use strict";e.exports=n.p+"4ad5279db063edd797e1.png"},8517:(e,t,n)=>{"use strict";e.exports=n.p+"d04f526b7dddfabc134e.png"},8037:(e,t,n)=>{"use strict";e.exports=n.p+"e93ecf0d51b7e4c1bba2.png"},9580:(e,t,n)=>{"use strict";e.exports=n.p+"b154e66e278ce08e5a40.png"},7018:(e,t,n)=>{"use strict";e.exports=n.p+"d7719dc1d102d175e1d6.png"},5950:(e,t,n)=>{"use strict";e.exports=n.p+"e6761c1eb70802747ebf.png"},2177:(e,t,n)=>{"use strict";e.exports=n.p+"83c00caefb5e05a0b5c0.png"},6606:(e,t,n)=>{"use strict";e.exports=n.p+"77b209310a1aed5ac794.png"},9778:(e,t,n)=>{"use strict";e.exports=n.p+"9db2a2d8967624274ddf.png"},3832:(e,t,n)=>{"use strict";e.exports=n.p+"4f7fcaf88015a18de8b1.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{"use strict";const e={events:{},on:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)if(this.events[e][n]===t){this.events[e].splice(n,1);break}},emit:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}};var t=n(5345),r=n(6450),o=n(211),i=n(9507),a=n(5142),s=n(985),c=n(2464),l=n(7313),u=n(8438),d=n(9979),p=n(3287),h=n(6537),f=n(8363),m=n(532),v=n(3494),g=n(836),y=n(7162),_=n(6992),b=n(7518),C=n(62),E=n(621),w=n(3414),x=n(3636),k=n(3804),S=n(9788),N=n(9978),T=n(3090),I=n(4275),A=n(92),P=n(4625),L=n(4408),R=n(7737),D=n(4243),O=n(5),q=n(6726),M=n(3267),F=n(8850),W=n(3201),j=n(5349);const z={"1-1":n(6438),"1-2":n(1272),"1-3":n(8517),"1-4":n(8037),"2-2":n(5950),"2-3":n(2177),"2-1":n(7018),"3-1":n(6606),"4-1":n(3832),"3-2":n(9778),"1-8":n(9580),"1-16":n(5515)},U={frac:d,bar:p,tion:h,golf_g:f,golf_o:m,golf_l:v,golf_f:g,start:y,button:_},B={ball1:t,ball2:r,ball3:o,ball4:i,ball5:a,ball6:s,ball7:c,ball8:l,ball9:u},$={background:b,title:P,settings:L,level1:C,level2:E,level3:w,level4:x,level5:k,level6:S,level7:N,level8:T,level9:I,locked:A},H={settings:L,"star-filled":D,"star-unfilled":R,home:O,restart:q,"restart-grey":M,mute:F,muted:W,github:j};var V=n(6099),G="8.9.0";V.Z.registerVersion("firebase",G,"app"),V.Z.SDK_VERSION=G,n(9446);const Y=(()=>{let e="";V.Z.initializeApp({apiKey:"AIzaSyAhJdt3KcdZwSORPhe43Y4iMKFE7kzhh68",authDomain:"fraction-golf.firebaseapp.com",databaseURL:"https://fraction-golf-default-rtdb.firebaseio.com",projectId:"fraction-golf",storageBucket:"fraction-golf.appspot.com",messagingSenderId:"628280210723",appId:"1:628280210723:web:5295f9883b7c2ff02fc896"});const t=V.Z.database();return{writeUserData:function(n,r){t.ref("users/"+e).set({levelPassed:n,levelStars:r})},getUserData:function(){return""===e?null:new Promise((function(n,r){t.ref().child("users").child(e).get().then((e=>{e.exists()?n(e.val()):n(null)})).catch((e=>{console.error(e)}))}))},setUserId:function(t){e=t},getUserId:function(){return e},checkIfUserExists:function(e){return new Promise((function(n,r){t.ref().child("users").child(e).get().then((e=>{n(e.exists())}))}))}}})(),Q=n.p+"7718c8e3eb97f3b63bf3b587fb0ea0d7.mp3",K=n.p+"c2b3a8630955f75407024d489be3d318.mp3",Z=n.p+"d824b1e8bf064838128f965dd04d38bb.mp3",J=(()=>{const e=new Audio(Q);e.volume=.5;const t=new Audio(K),n=new Audio(Z);return{stopBackgroundMusic:function(){e.pause(),e.currentTime=0},playBackgroundMusic:function(){"boolean"==typeof e.loop?e.loop=!0:e.addEventListener("ended",(function(){this.currentTime=0,this.play()}),!1),e.play()},musicPlaying:function(){return e.loop},playBallRolling:function(){t.currentTime=0,t.play()},playBallBounce:function(){n.currentTime=0,n.play()}}})(),X=(()=>{const t=document.querySelector("body");function n(e,t,n,r,o){setTimeout((function(){e.style.animation=`${r} ${o} ease-out 1 forwards`}),n*t)}function r(t){const n=t.target.container;n.querySelectorAll("*").forEach((function(e){e.remove()}));const r=document.createElement("label");r.className="sign-in-user-label",r.id="new-game-text",r.textContent="User Name: ";const o=document.createElement("input");o.className="sign-in-user-name",o.id="new-game-input",o.type="text",o.placeholder="User Name";const i=document.createElement("p");i.className="sign-in-help-text",i.textContent="";const a=document.createElement("p");a.className="enter-game-button",a.id="new-game-button",a.textContent="Start Game!",a.addEventListener("click",(function(){const t=o.value;""!==t?Y.checkIfUserExists(t).then((function(r){r?i.textContent="Name already exists. Please select a new name.":(Y.setUserId(t),Y.writeUserData(0,[0,0,0,0,0,0,0,0,0]),n.remove(),e.emit("load",{page:"levelSelect"}))})):i.textContent="Field cannot be empty"})),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a)}function o(t){const n=t.target.container;n.querySelectorAll("*").forEach((function(e){e.remove()}));const r=document.createElement("label");r.className="sign-in-user-label",r.textContent="User Name: ";const o=document.createElement("input");o.className="sign-in-user-name",o.type="text",o.placeholder="User Name";const i=document.createElement("p");i.className="sign-in-help-text",i.textContent="";const a=document.createElement("p");a.className="enter-game-button",a.textContent="Resume Game!",a.addEventListener("click",(function(){const t=o.value;""!==t?Y.checkIfUserExists(t).then((function(r){r?(Y.setUserId(t),n.remove(),e.emit("load",{page:"levelSelect"})):i.textContent="User doesn't exist"})):i.textContent="Field cannot be empty"})),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a)}function i(e){if("sign-in-container"===e.target.parentElement.id||"sign-in-container"===e.target.id)return;window.removeEventListener("click",i);const t=document.querySelector("#sign-in-container");null!==t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function a(e,t){const n=document.createElement("div");return e.forEach((function(e){n.classList.add(e)})),n.id=t,n}function s(e,t){const n=document.createElement("img");return n.id=e,n.setAttribute("src",t),n}return{load:function(){const e=a([],"background"),c=function(){const e=a([],"blocks"),t=a(["background-block","dark-green"],"first-block"),n=a(["background-block","med-green"],"second-block"),r=a(["background-block","light-green"],"third-block"),o=a(["background-block","dark-green"],"fourth-block"),i=a(["background-block","med-green"],"fifth-block");return e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(o),e.appendChild(i),e}(),l=c.querySelectorAll(".background-block"),u=function(){const e=a([],"fraction"),t=s("frac",U.frac),n=s("bar",U.bar),r=s("tion",U.tion);return e.appendChild(t),e.appendChild(n),e.appendChild(r),e}(),d=u.querySelector("#frac"),p=u.querySelector("#tion"),h=function(){const e=a([],"golf"),t=s("g",U.golf_g);t.style.opacity="0%";const n=s("o",U.golf_o);n.style.opacity="0%";const r=s("l",U.golf_l);r.style.opacity="0%";const o=s("f",U.golf_f);return o.style.opacity="0%",e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(o),e}(),f=h.querySelectorAll("#golf > img");e.appendChild(c),e.appendChild(u),e.appendChild(h),t.appendChild(e),l.forEach((function(e,t){n(e,t,200,"blockAnimation","0.3s")})),d.style.animation="frac 0.7s ease-out 1 forwards",p.style.animation="tion 0.7s ease-out 1 forwards",f.forEach((function(e,t){n(e,t,200,"golf","0.3s")})),setTimeout((function(){const t=function(){const e=a([],"start"),t=s("button",U.button),n=s("text",U.start);return e.appendChild(t),e.appendChild(n),e}(),n=t.querySelector("#button"),c=t.querySelector("#text");t.addEventListener("click",(function(){J.musicPlaying()||J.playBackgroundMusic(),function(e){const t=document.createElement("div");t.id="sign-in-container";const n=document.createElement("p");n.textContent="New Game",n.className="sign-in-button",n.container=t,n.addEventListener("click",r);const a=document.createElement("p");a.textContent="Resume Game",a.className="sign-in-button",a.container=t,a.addEventListener("click",o),t.appendChild(n),t.appendChild(a),e.appendChild(t),setTimeout((function(){window.addEventListener("click",i)}),20)}(e)})),e.appendChild(t),n.style.animation="button 0.4s ease-out 1 forwards",c.style.animation="button 0.4s ease-out 1 forwards"}),1e3)},transition:function(e){document.querySelectorAll("#background *").forEach((function(e){e.style.transition="transform 1.5s ease-in-out 0.2s",e.style.transform="translate(0px, -2500px)"})),setTimeout((function(){document.querySelector("#background").remove()}),1200)}}})();var ee=n(3379),te=n.n(ee),ne=n(7795),re=n.n(ne),oe=n(569),ie=n.n(oe),ae=n(3565),se=n.n(ae),ce=n(9216),le=n.n(ce),ue=n(6655),de=n.n(ue),pe=n(4822),he={};he.styleTagTransform=de(),he.setAttributes=se(),he.insert=ie().bind(null,"head"),he.domAPI=re(),he.insertStyleElement=le(),te()(pe.Z,he),pe.Z&&pe.Z.locals&&pe.Z.locals;const fe=(()=>{let t=Y.getUserData(),n=t?t.levelPassed:0,r=t?t.levelStars:[0,0,0,0,0,0,0,0,0];function o(t){const n=t.target.container,r=document.createElement("div");r.id="level-select-settings-container";const o=document.createElement("h2");o.id="level-select-settings-title",o.textContent="Settings";const a=document.createElement("div");a.id="level-select-icon-container";const s=document.createElement("img");s.setAttribute("src",H.github),s.addEventListener("click",(function(){window.location.href="https://github.com/talkative-egg/fraction-golf"}));const c=document.createElement("img");c.setAttribute("src",H.mute),c.id="mute-button",c.addEventListener("click",(function(e){c.getAttribute("src")===H.mute?(c.setAttribute("src",H.muted),J.stopBackgroundMusic()):(c.setAttribute("src",H.mute),J.playBackgroundMusic())}));const l=document.createElement("img");l.setAttribute("src",H.home),l.addEventListener("click",(function(){e.emit("load",{page:"titlePage"})})),a.appendChild(s),a.appendChild(c),a.appendChild(l),r.appendChild(o),r.appendChild(a),n.appendChild(r),setTimeout((function(){window.addEventListener("click",i)}),20)}function i(e){if("mute-button"===e.target.id)return;window.removeEventListener("click",i);const t=document.querySelector("#level-select-settings-container");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}e.on("levelWin",(function({level:e,star:t}){0===r[e-1]&&n++,t>r[e-1]&&(r[e-1]=t),Y.writeUserData(n,r)}));let a=!1;return document.addEventListener("keydown",(function(t){"Control"===t.key&&(a=!0),a&&"i"===t.key&&(n=9,e.emit("load",{page:"levelSelect"}))})),document.addEventListener("keyup",(function(e){a=!1})),{load:function(){Y.getUserData().then((function(t){n=t.levelPassed,r=t.levelStars;const i=document.querySelector("body"),a=document.createElement("div");a.id="level-select",a.style.background=`url(${$.background}) no-repeat center center fixed`,a.style.backgroundSize="100% 100%",a.style.zIndex="-1",setTimeout((function(){a.style.zIndex="0"}),1e3),function(e){const t=document.createElement("img");t.setAttribute("src",$.title),t.id="level-select-title",e.appendChild(t)}(a),function(e){const t=document.createElement("img");t.setAttribute("src",$.settings),t.id="settings-button",t.container=e,t.addEventListener("click",o),e.appendChild(t)}(a),function(t){const o=document.createElement("div");o.id="button-container-outer";const i=document.createElement("div");i.id="button-container";for(let t=1;t<=9;t++){const o=document.createElement("div");o.classList.add("level-select-button-outer");const a=document.createElement("img");if(a.classList.add("level-button"),t-1<=n?(o.classList.add("unlocked-level-outer"),o.addEventListener("click",(function(){e.emit("load",{page:`level${t}`})})),a.setAttribute("src",$[`level${t}`])):a.setAttribute("src",$.locked),o.appendChild(a),r[t-1]>0){const e=document.createElement("div");e.className="level-select-star-container";const n=r[t-1],i=document.createElement("img");i.setAttribute("src",H["star-filled"]),i.className="level-select-star";const a=document.createElement("img");a.setAttribute("src",H["star-unfilled"]),a.className="level-select-star";for(let t=0;t<3;t++)t<n?e.appendChild(i.cloneNode(!0)):e.appendChild(a.cloneNode(!0));o.appendChild(e)}i.appendChild(o)}o.appendChild(i),t.appendChild(o)}(a),i.prepend(a)}))}}})();var me=n(6104),ve=n.n(me);const ge=(t,n=0,r=!1)=>{const o=50,i=n,a=ve()();let s=document.documentElement.scrollHeight,c=document.documentElement.scrollWidth,l=r?g(0,Math.floor(s/2)-10-o):g(Math.floor(s/2)+10,s-o),u=g(0,120),d=r,p=0,h=0;const f=document.createElement("div"),m=document.querySelector("#line"),v=document.querySelector("#dashed-line");if(f.style.width="50px",f.style.height="50px",f.style.borderRadius="50%",f.style.position="absolute",f.style.left=`${u}px`,f.style.top=`${l}px`,f.style.zIndex="2",f.className="noselect",i>0&&i<=9){const e=B[`ball${i}`];f.style.background=`no-repeat url(${e})`,f.style.backgroundSize="100%"}else f.textContent=i,f.style.textAlign="center",f.style.fontSize="38px",f.style.background="red",f.style.color="white";function g(e,t){return Math.floor(Math.random()*(t-e))+e}const y=e=>Math.abs(e)<.5,_=(e,t,n,r)=>(e=parseInt(e),t=parseInt(t),n=parseInt(n),r=parseInt(r),Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))),b=()=>{f.style.top=`${l}px`,f.style.left=`${u}px`},C=(e,t,n)=>{const r=u+25,o=l+25,i=Math.atan2(r-e,o-t),a=_(e,t,r,o);0==n?(u+=Math.cos(i)*a*.4,l-=Math.sin(i)*a*.4):(u-=Math.cos(i)*a*.4,l+=Math.sin(i)*a*.4),u+=.15*(e-r),l+=.15*(t-o),b()},E=({cx:t,cy:n,r,vx:o,vy:i,id:a})=>{s=document.documentElement.scrollHeight,c=document.documentElement.scrollWidth,t+r+o>c?e.emit("collision",{axis:"x",direction:"negative",id:a}):t-r+o<0&&e.emit("collision",{axis:"x",direction:"positive",id:a}),n+r+i>s?e.emit("collision",{axis:"y",direction:"negative",id:a}):n-r+i<0&&e.emit("collision",{axis:"y",direction:"positive",id:a})},w=({axis:e,direction:t,id:n})=>{n===a&&("x"===e&&"negative"===t&&p>=0||"x"===e&&"positive"===t&&p<=0?p*=-1:("y"===e&&"negative"===t&&h>=0||"y"===e&&"positive"===t&&h<=0)&&(h*=-1))},x=({centerX:e,centerY:t,id:n,intervalId:i,correct:c})=>{if(n!==a)return;clearInterval(i),f.removeEventListener("mousedown",S);const d=u+25,m=l+25,v=_(d,m,e,t);let y;y=d>=e&&m<=t?1:d>=e&&m>=t?0:d<e&&m>=t?1:0,u=e-15*(e-d)/v-25,l=t-15*(t-m)/v-25,b(),n=setInterval(C,30,e,t,y),setTimeout((function(){((e,t,n)=>{clearInterval(e),l=n-25,u=t-25,b()})(n,e,t),c||(l=r?g(0,Math.floor(s/2)-10-o):g(Math.floor(s/2)+10,s-o),u=g(0,120),p=0,h=0,f.addEventListener("mousedown",A),b())}),2e3)},k=e=>{const t=e.pageX,n=e.pageY,r=_(t,n,u+25,l+25);let i,a;r>200?(i=u+25-200*(u+25-t)/r,a=l+25-200*(l+25-n)/r):(i=t,a=n),m.setAttribute("x1",`${i}`),m.setAttribute("y1",`${a}`),m.setAttribute("x2",`${u+25}`),m.setAttribute("y2",`${l+25}`),v.setAttribute("x1",`${u+25}`),v.setAttribute("y1",`${l+25}`),v.setAttribute("x2",""+(2*u+50-i)),v.setAttribute("y2",""+(2*l+o-a))},S=e=>{0==p&&0==h&&(window.addEventListener("mousemove",k),window.addEventListener("mouseup",N))},N=t=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",N);const n=parseInt(m.getAttribute("x2"))-parseInt(m.getAttribute("x1")),r=parseInt(m.getAttribute("y2"))-parseInt(m.getAttribute("y1"));m.setAttribute("x1","0"),m.setAttribute("y1","0"),m.setAttribute("x2","0"),m.setAttribute("y2","0"),v.setAttribute("x1","0"),v.setAttribute("y1","0"),v.setAttribute("x2","0"),v.setAttribute("y2","0"),((e=5*Math.random(),t=Math.sqrt(25-xSpeed**2))=>{p=e,h=t})(n/7,r/7);const o=setInterval((function(){(t=>{u+=p,l+=h,e.emit("ballMove",{cx:u+25,cy:l+25,r:25,vx:p,vy:h,id:a,intervalId:t,number:i}),b(),y(p)&&y(h)?(p=0,h=0,clearInterval(t)):(p/=1.016,h/=1.016)})(o)}),10);e.on("ballMove",E),e.on("collision",w),e.on("hitGoal",x),e.emit("ballReleased")},T=e=>{l=e.pageY-25,u=e.pageX-25,u>=150?u=150:u<0&&(u=0),l<0?l=0:l>s-50&&(l=s-50),d&&l>=Math.floor(s/2)-10-o?l=Math.floor(s/2)-10-o:!d&&l<=Math.floor(s/2)+10&&(l=Math.floor(s/2)+10),b()},I=e=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",I),f.addEventListener("mousedown",S)},A=e=>{window.addEventListener("mousemove",T),window.addEventListener("mouseup",I),f.removeEventListener("mousedown",A)};f.addEventListener("mousedown",A),f.addEventListener("mouseenter",(e=>{f.style.cursor="pointer"})),f.addEventListener("mouseleave",(e=>{f.style.cursor="auto"})),t.appendChild(f)},ye=(t,n=300,r=300,o=0)=>{const i=n,a=r,s=o,c=document.createElement("div");c.style.width="60px",c.style.height="60px",c.style.borderRadius="50%",c.style.backgroundColor="green",c.style.position="absolute",c.style.left=`${a}px`,c.style.top=`${i}px`,c.style.zIndex="1";const l=t=>{const n=t.cx,r=t.cy,o=t.r,s=t.id,c=t.intervalId,d=t.number,p=a+30,h=i+30,f=o+30,m=u(d);var v,g,y,_;v=n,g=r,y=p,_=h,Math.sqrt(Math.pow(y-v,2)+Math.pow(_-g,2))<f-10&&(e.emit("hitGoal",{centerX:p,centerY:h,id:s,intervalId:c,correct:m}),m&&e.off("ballMove",l))},u=e=>s===e;t.appendChild(c),e.on("ballMove",l)},_e=(t,n,r,o,i,a="black")=>{const s=n,c=r,l=o,u=i,d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=a,d.style.width=`${l}px`,d.style.height=`${u}px`,d.style.left=`${c}px`,d.style.top=`${s}px`,e.on("ballMove",(({cx:t,cy:n,r,vx:o,vy:i,id:a})=>{t-r+o<=c+l&&t+r+o>=c&&(n-r+i<s+u&&n-r>s+u?e.emit("collision",{axis:"y",direction:"positive",id:a}):n+r+i>s&&n+r<s&&e.emit("collision",{axis:"y",direction:"negative",id:a})),n-r+i<=s+u&&n+r+i>=s&&(t-r+o<c+l&&t-r>c+l?e.emit("collision",{axis:"x",direction:"positive",id:a}):t+r+o>c&&t+r<c&&e.emit("collision",{axis:"x",direction:"negative",id:a}))})),t.appendChild(d)},be=(()=>{let t=0,n=document.documentElement.scrollHeight,r=document.documentElement.scrollWidth;function o(){t+=1,document.querySelector("#score-display").textContent=`Strokes: ${t}`}return{load:function(){null!=document.querySelector("#demo-level")&&document.querySelector("#demo-level").remove(),n=document.documentElement.scrollHeight,r=document.documentElement.scrollWidth;const i=document.createElement("div");i.id="demo-level",i.style.position="absolute",i.style.width="100%",i.style.height="100%",i.style.overflow="none",i.style.zIndex="-1",document.querySelector("body").prepend(i),setTimeout((function(){i.style.zIndex="0"}),1e3),function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(i),_e(i,Math.floor(n/2)-10,0,r-450,20),_e(i,Math.floor(n/2)-10,r-195,130,20,"blue"),function(e){const t=document.createElement("div");t.style.backgroundColor="#abd6ab",t.style.zIndex="0",t.style.width="200px",t.style.height=Math.floor(n/2)-10+"px",t.style.position="absolute",t.style.top="0px",t.style.left="0px";const r=document.createElement("div");r.style.backgroundColor="#abd6ab",r.style.zIndex="0",r.style.width="200px",r.style.height=Math.ceil(n/2)-10+"px",r.style.position="absolute",r.style.top=`${Math.floor(n/2)+10}px`,r.style.left="0px",e.appendChild(t),e.appendChild(r)}(i),function(e){ge(e,5,!0),ge(e,3,!0),ge(e,2,!0),ge(e,1,!1),ge(e,6,!1),ge(e,7,!1)}(i),ye(i,Math.floor(n/2)-150,r-160,5),ye(i,Math.floor(n/2)+90,r-160,6),function(e){const t=document.createElement("p");t.textContent="10",t.id="top-number",t.style.position="absolute",t.style.fontSize="50px",t.style.top=Math.floor(n/2)-170+"px",t.style.left=r-450+"px",t.style.padding="20px",t.style.border="5px solid black";const o=document.createElement("p");o.textContent="12",o.id="bottom-number",o.style.position="absolute",o.style.fontSize="50px",o.style.top=`${Math.floor(n/2)+70}px`,o.style.left=r-450+"px",o.style.padding="20px",o.style.border="5px solid black";const i=document.createElement("p");i.textContent="=",i.id="equal-sign",i.style.position="absolute",i.style.top=Math.floor(n/2)-65+"px",i.style.left=r-300+"px",i.style.fontSize="100px",e.appendChild(t),e.appendChild(o),e.appendChild(i)}(i),function(e){t=0;const n=document.createElement("p");n.textContent=`Strokes: ${t}`,n.id="score-display",n.style.position="absolute",n.style.top="20px",n.style.right="20px",n.style.fontSize="30px",e.appendChild(n)}(i),e.on("ballReleased",o)}}})(),Ce=(t,n,r=0,o=!1)=>{let i=44,a=44;const s=r,c=ve()();let l,u,d=document.documentElement.scrollHeight,p=document.documentElement.scrollWidth;p>1440?(i=50,a=50):p>1920&&(i=56,a=56);let h=o,f=0,m=0;const v=document.createElement("div");b();const g=document.querySelector("#line"),y=document.querySelector("#dashed-line");if(v.style.width=`${i}px`,v.style.height=`${a}px`,v.style.borderRadius="50%",v.style.position="absolute",v.style.zIndex="2",v.className="noselect",s>0&&s<=9){const e=B[`ball${s}`];v.style.background=`no-repeat url(${e})`,v.style.backgroundSize="100%"}else v.textContent=s,v.style.textAlign="center",v.style.fontSize="38px",v.style.background="red",v.style.color="white";function _(e,t){return Math.floor(Math.random()*(t-e))+e}function b(){d=document.documentElement.scrollHeight,p=document.documentElement.scrollWidth;const e=.1*d,t=.8*d,n=.1*p;l=h?_(Math.floor(e),Math.floor(e+t/2)-a-5):_(Math.floor(e+t/2)+5,d-e-a),u=_(0,n-i),f=0,m=0,C()}function C(){v.style.top=`${l}px`,v.style.left=`${u}px`}const E=e=>Math.abs(e)<.5,w=(e,t,n,r)=>(e=parseInt(e),t=parseInt(t),n=parseInt(n),r=parseInt(r),Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))),x=(e,t,n)=>{const r=u+i/2,o=l+a/2,s=Math.atan2(r-e,o-t),c=w(e,t,r,o);0==n?(u+=Math.cos(s)*c*.4,l-=Math.sin(s)*c*.4):(u-=Math.cos(s)*c*.4,l+=Math.sin(s)*c*.4),u+=.18*(e-r),l+=.18*(t-o),C()},k=({cx:t,cy:n,r,vx:o,vy:i,id:a})=>{const s=document.querySelector("#game-container"),c=s.offsetHeight;t+r+o>s.offsetWidth?e.emit("collision",{axis:"x",direction:"negative",id:a}):t-r+o<0&&e.emit("collision",{axis:"x",direction:"positive",id:a}),n+r+i>c?e.emit("collision",{axis:"y",direction:"negative",id:a}):n-r+i<0&&e.emit("collision",{axis:"y",direction:"positive",id:a})},S=({axis:e,direction:t,id:n})=>{n===c&&(J.playBallBounce(),"x"===e&&"negative"===t&&f>=0||"x"===e&&"positive"===t&&f<=0?f*=-1:("y"===e&&"negative"===t&&m>=0||"y"===e&&"positive"===t&&m<=0)&&(m*=-1))},N=({centerX:t,centerY:r,id:o,intervalId:s,correct:d})=>{if(o!==c)return;clearInterval(s),v.removeEventListener("mousedown",I);const p=u+i/2,f=l+a/2,m=w(p,f,t,r);let g;g=p>=t&&f<=r?1:p>=t&&f>=r?0:p<t&&f>=r?1:0,u=t-15*(t-p)/m-i/2,l=r-15*(r-f)/m-a/2,C(),o=setInterval(x,30,t,r,g),setTimeout((function(){if(((e,t,n)=>{clearInterval(e),l=n-a/2,u=t-i/2,C()})(o,t,r),d)e.off("resetBall",L);else{const e=n.offsetHeight;l=h?e/4-a+a/2:3*e/4-a/2,u=40,C()}}),2e3)},T=e=>{d=document.documentElement.scrollHeight,p=document.documentElement.scrollWidth;const t=e.pageX-.125*p,n=e.pageY-.1*d,r=w(t,n,u+i/2,l+a/2);let o,s;r>200?(o=u+i/2-200*(u+i/2-t)/r,s=l+a/2-200*(l+a/2-n)/r):(o=t,s=n),g.setAttribute("x1",`${o}`),g.setAttribute("y1",`${s}`),g.setAttribute("x2",`${u+i/2}`),g.setAttribute("y2",`${l+a/2}`),y.setAttribute("x1",`${u+i/2}`),y.setAttribute("y1",`${l+a/2}`),y.setAttribute("x2",""+(2*u+i-o)),y.setAttribute("y2",""+(2*l+a-s))},I=e=>{0==f&&0==m&&(window.addEventListener("mousemove",T),window.addEventListener("mouseup",A))},A=t=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",A);const n=parseInt(g.getAttribute("x2"))-parseInt(g.getAttribute("x1")),r=parseInt(g.getAttribute("y2"))-parseInt(g.getAttribute("y1"));if(g.setAttribute("x1","0"),g.setAttribute("y1","0"),g.setAttribute("x2","0"),g.setAttribute("y2","0"),y.setAttribute("x1","0"),y.setAttribute("y1","0"),y.setAttribute("x2","0"),y.setAttribute("y2","0"),n<=i/2&&n>=-i/2&&r<=a/2&&r>=-a/2)return;if(NaN===n||NaN===r)return;((e=5*Math.random(),t=Math.sqrt(25-xSpeed**2))=>{f=e,m=t})(n/7,r/7);const o=setInterval((function(){(t=>{u+=f,l+=m,e.emit("ballMove",{cx:u+i/2,cy:l+a/2,r:i/2,vx:f,vy:m,id:c,intervalId:t,number:s}),C(),E(f)&&E(m)?(f=0,m=0,clearInterval(t)):(f/=1.016,m/=1.016)})(o)}),10);e.on("ballMove",k),e.on("collision",S),e.on("hitGoal",N),e.emit("ballReleased")},P=t=>{v.removeEventListener("click",P);const r=n.offsetHeight;h?(e.emit("resetBall",{position:"top"}),setTimeout((function(){v.classList.add("top-ball")}),10),l=r/4-a+a/2):(e.emit("resetBall",{position:"bottom"}),setTimeout((function(){v.classList.add("bottom-ball")}),10),l=3*r/4-a/2),u=40,v.remove(),n.appendChild(v),C(),v.addEventListener("mousedown",I)},L=({position:e})=>{v.classList.contains(`${e}-ball`)&&(v.addEventListener("click",P),b(),v.remove(),t.appendChild(v),v.removeEventListener("mousedown",I))};return v.addEventListener("click",P),v.addEventListener("mouseenter",(e=>{v.style.cursor="pointer"})),v.addEventListener("mouseleave",(e=>{v.style.cursor="auto"})),t.appendChild(v),e.on("resetBall",L),{remove:()=>{e.off("resetBall",L),e.off("ballMove",k),e.off("collision",S),e.off("hitGoal",N)}}},Ee=(t,n,r,o=0)=>{let i=60,a=60;const s=r-a/2,c=n-i/2,l=o;let u=document.documentElement.scrollWidth;u>1440?(i=66,a=66):u>1920&&(i=72,a=72);const d=document.createElement("div");d.className="hole",d.style.width=`${i}px`,d.style.height=`${a}px`,d.style.borderRadius="50%",d.style.position="absolute",d.style.left=`${c}px`,d.style.top=`${s}px`,d.style.zIndex="1";const p=t=>{const n=t.cx,r=t.cy,o=t.r,l=t.id,u=t.intervalId,d=t.number,f=c+i/2,m=s+a/2,v=o+i/2,g=h(d);var y,_,b,C;y=n,_=r,b=f,C=m,Math.sqrt(Math.pow(b-y,2)+Math.pow(C-_,2))<v-10&&(J.playBallRolling(),e.emit("hitGoal",{centerX:f,centerY:m,id:l,intervalId:u,correct:g}),g&&e.off("ballMove",p))},h=e=>l===e;return t.appendChild(d),e.on("ballMove",p),{remove:()=>{e.off("ballMove",p)}}},we=(t,n,r,o,i,a=[1,1],s=!1)=>{const c=n,l=r,u=o,d=i,p=document.createElement("div");if(s)p.className="center-wall";else{p.className="pillar",p.style.backgroundSize=`${u}px ${d}px`;const e=z[`${a[0]}-${a[1]}`];p.style.background=`url(${e}) center/150%`,p.style.backgroundSize=`${u}px ${d}px`}p.style.position="absolute",p.style.width=`${u}px`,p.style.height=`${d}px`,p.style.left=`${l}px`,p.style.top=`${c}px`;const h=({cx:t,cy:n,r,vx:o,vy:i,id:a})=>{t-r+o<=l+u&&t+r+o>=l&&(n-r+i<c+d&&n-r>c+d?e.emit("collision",{axis:"y",direction:"positive",id:a}):n+r+i>c&&n+r<c&&e.emit("collision",{axis:"y",direction:"negative",id:a})),n-r+i<=c+d&&n+r+i>=c&&(t-r+o<l+u&&t-r>l+u?e.emit("collision",{axis:"x",direction:"positive",id:a}):t+r+o>l&&t+r<l&&e.emit("collision",{axis:"x",direction:"negative",id:a}))};return e.on("ballMove",h),t.appendChild(p),{remove:()=>{e.off("ballMove",h)}}};var xe=n(8261),ke={};ke.styleTagTransform=de(),ke.setAttributes=se(),ke.insert=ie().bind(null,"head"),ke.domAPI=re(),ke.insertStyleElement=le(),te()(xe.Z,ke),xe.Z&&xe.Z.locals&&xe.Z.locals;const Se=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,7),r=f(1,7),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>10&&t[1].setAttribute("src",H["star-unfilled"]),a>13&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=10?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 1",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 10 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 13 strokes",d.appendChild(h);const f=document.createElement("p");f.textContent="Click on one ball from the top for the top of the fraction and one from the bottom for the bottom. Then, drag each ball to get it into the goal!",f.id="level-1-help-text";const m=document.createElement("button-container");m.className="level-button-container";const v=document.createElement("button");v.textContent="Got it!",v.className="level-popup-button";const g=document.createElement("img");g.setAttribute("src",H.restart),g.className="restart-button",g.addEventListener("click",(function(){e.emit("load",{page:"level1",makePopup:!1})}));const y=document.createElement("img");y.setAttribute("src",H.home),y.className="home-button",y.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),m.appendChild(v),m.appendChild(g),m.appendChild(y),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),r.appendChild(m),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:1,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 1";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level2"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level1"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 1";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level1"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level1",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(2,6),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,E-50,C/2-60,n)),c.push(Ee(p,E-50,C/2+60,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,0,E/3,50,3*C/10,[3,1])),c.push(we(p,C/2-C/3,2*E/3,50,C/3-5,[3,1])),c.push(we(p,C-C/4,2*E/5,70,C/4,[2,1])),c.push(we(p,C/2+5,3*E/5,40,C/3,[4,1])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),Ne=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,8),r=f(1,8),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>12&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 2",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 12 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level2",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:2,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 2";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level3"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level2"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 2";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level2"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level2",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(2,6),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,E-50,C/2-60,n)),c.push(Ee(p,E-50,C/2+60,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,0,E/3,50,3*C/8,[4,1])),c.push(we(p,0,2*E/4,50,C/4,[2,1])),c.push(we(p,0,3*E/4,50,C/3,[3,1])),c.push(we(p,C-C/3,E/4,90,C/3,[3,2])),c.push(we(p,C-C/4,4*E/5,40,C/4,[3,1])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),Te=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,8),r=f(1,8),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>12&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 3",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 12 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level3",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:3,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 3";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level4"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level3"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 3";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level3"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level3",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(2,6),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,E-50,C/2-60,n)),c.push(Ee(p,E-50,C/2+60,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,C/2-C/3-5,E/3,250,C/3,[2,2])),c.push(we(p,0,2*E/3,70,C/4,[3,1])),c.push(we(p,C/2+5,E/4,70,C/4,[2,1])),c.push(we(p,C-C/8,E/4,70,C/8,[1,1])),c.push(we(p,C/2+5,E/2,100,C/3,[3,2])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),Ie=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,8),r=f(1,8),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>6&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>11&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=6?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 4",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 6 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 11 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level4",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:4,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 4";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level5"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level4"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 4";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level4"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level4",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(3,7),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,E-50,C/2-60,n)),c.push(Ee(p,E-50,C/2+60,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,0,E/5,E/4,C/4,[2,3])),c.push(we(p,C/2-C/8-5,2*E/5,E/4,C/8,[1,3])),c.push(we(p,3*C/20,3*E/4,E/10,C/5,[1,1])),c.push(we(p,C-C/6,E/6,100,C/6,[1,1])),c.push(we(p,C-11*C/40,E/3,E/3,C/20,[1,8])),c.push(we(p,C/2+5,5*E/6,E/20,C/4,[3,1])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),Ae=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,9),r=f(1,9),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>12&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 5",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 12 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level5",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:5,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 5";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level6"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level5"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 5";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level5"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level5",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(4,11),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,E-50,C/2-60,n)),c.push(Ee(p,E-50,C/2+60,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,0,E/4,E/3,C/3,[2,3])),c.push(we(p,C/2-C/8-5,2*E/3,E/8,C/8,[1,2])),c.push(we(p,C-C/3,E/6,E/8,C/3,[3,2])),c.push(we(p,C/2+5,2*E/5,E/8,C/3,[3,2])),c.push(we(p,C-C/3,3*E/5,E/6,C/3,[2,2])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),Pe=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,10),r=f(1,10),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>12&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 6",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 12 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level6",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:6,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 6";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level7"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level6"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 6";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level6"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level6",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(4,11),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,E-50,C/2-60,n)),c.push(Ee(p,E-50,C/2+60,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,0,E/7,E/4,C/4,[2,3])),c.push(we(p,C/2-C/10,E/7,E/4,C/10-5,[1,4])),c.push(we(p,0,7*E/12,E/4,C/8,[1,3])),c.push(we(p,C/2-C/4,7*E/12,E/4,C/4-5,[2,3])),c.push(we(p,0,7*E/8,E/11,C/8,[1,1])),c.push(we(p,C/2+5,E/5,E/4,3*C/8,[2,2])),c.push(we(p,C-3*C/8,3*E/5,E/4,3*C/8,[2,2])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),Le=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,10),r=f(1,10),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>12&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 7",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 12 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level7",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:7,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 7";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level8"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level7"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 7";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level7"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level7",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(4,13),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,E-50,C/2-60,n)),c.push(Ee(p,E-50,C/2+60,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,C/8,E/6,E/8,C/4)),c.push(we(p,0,E/2,E/8,C/6)),c.push(we(p,C/2-C/6,E/2,E/8,C/6-5)),c.push(we(p,C/8,3*E/4,E/10,C/4,[2,1])),c.push(we(p,C/2+C/3,E/5,2*E/3,C/10,[1,8])),c.push(we(p,C/2+5,2*E/7,E/10,2*C/9,[2,1])),c.push(we(p,C/2+C/3-2*C/9,E/2,E/10,2*C/9,[2,1])),c.push(we(p,C/2+5,5*E/7,E/10,2*C/9,[2,1])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),Re=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,10),r=f(1,10),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>12&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 8",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 12 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level8",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:8,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 8";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"level9"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level8"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 8";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level8"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level8",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(4,10),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,3*E/4-E/8,50,n)),c.push(Ee(p,E/2,C-40,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,C/4,E/8,E/7,C/4-5,[2,2])),c.push(we(p,0,2*E/5,E/25,C/3,[4,1])),c.push(we(p,C/3-C/20,E/2-20,E/4,C/20,[1,8])),c.push(we(p,0,3*E/4-E/20-20,E/20,C/7,[2,1])),c.push(we(p,C/2+C/8,E/5,E/12,C/4,[3,2])),c.push(we(p,C-C/8,2*E/5,E/25,C/8,[2,1])),c.push(we(p,C/2+C/20+C/8,2*E/5,E/4,C/20,[1,8])),c.push(we(p,C/2+C/20+C/8,5*E/7,E/20,C/3-5,[4,1])),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})(),De=(()=>{let t,n,r,o,i,a=0,s=!0,c=[],l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,d=0,p=0;m();let h=0;function f(e,t,n=[]){const r=Math.floor(Math.random()*(t-e))+e;return n.includes(r)?f(e,t,n):r}function m(){n=f(1,10),r=f(1,10),n===r&&m(),1===r&&m(),n===d&&r===p&&m();const e=[n,r];o=[],o.push(n);const t=f(1,10,e);o.push(t),e.push(t),i=[],i.push(r);const a=f(1,10,e);i.push(a),e.push(a),new Set(e).size!==e.length&&m(),t/n==a/r&&m(),d=n,p=r}function v(){const t=document.querySelectorAll(".star");a+=1,document.querySelector("#score-display").textContent=`Strokes: ${a}`,a>7&&t[2].setAttribute("src",H["star-unfilled"]),a>9&&t[1].setAttribute("src",H["star-unfilled"]),a>12&&e.emit("gameOver",{status:"lost",star:0})}function g({correct:n}){if(function(e){const n=document.createElement("div");n.className="goal-popup";const r=document.createElement("p");r.className="goal-popup-text",e?(r.textContent="Nice Shot!",n.id="goal-popup-correct"):(r.textContent="Not Quite",n.id="goal-popup-incorrect"),n.appendChild(r),t.appendChild(n),setTimeout((function(){n.remove()}),2e3)}(n),n&&(h+=1,h>=2)){let t=0;t=a<=7?3:a<=9?2:1,setTimeout((function(){e.emit("gameOver",{status:"win",star:t})}),2e3)}}function y(t){t=t instanceof Event?t.currentTarget.container:t;const n=document.createElement("img");n.setAttribute("src",H["star-filled"]);const r=document.createElement("div");r.className="level-popup",r.id="start-popup";const o=document.createElement("h2");o.textContent="Level 9",o.id="start-popup-title";const i=document.createElement("div");i.classList.add("star-outer-container");const a=document.createElement("div");a.classList.add("star-inner-container"),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),a.appendChild(n.cloneNode(!0)),i.appendChild(a);const s=document.createElement("p");s.textContent="≤ 7 strokes",i.appendChild(s);const c=document.createElement("div");c.classList.add("star-outer-container");const l=document.createElement("div");l.classList.add("star-inner-container"),l.appendChild(n.cloneNode(!0)),l.appendChild(n.cloneNode(!0)),c.appendChild(l);const u=document.createElement("p");u.textContent="≤ 9 strokes",c.appendChild(u);const d=document.createElement("div");d.classList.add("star-outer-container");const p=document.createElement("div");p.classList.add("star-inner-container"),p.appendChild(n.cloneNode(!0)),d.appendChild(p);const h=document.createElement("p");h.textContent="≤ 12 strokes",d.appendChild(h);const f=document.createElement("button-container");f.className="level-button-container";const m=document.createElement("button");m.textContent="Got it!",m.className="level-popup-button";const v=document.createElement("img");v.setAttribute("src",H.restart),v.className="restart-button",v.addEventListener("click",(function(){e.emit("load",{page:"level9",makePopup:!1})}));const g=document.createElement("img");g.setAttribute("src",H.home),g.className="home-button",g.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),f.appendChild(m),f.appendChild(v),f.appendChild(g),r.appendChild(o),r.appendChild(i),r.appendChild(c),r.appendChild(d),r.appendChild(f),t.appendChild(r),setTimeout((function(){window.addEventListener("click",_)}),50)}function _(e){window.removeEventListener("click",_);const t=document.querySelector("#start-popup");null!=t&&(t.style.animation="slideOutToBottom 0.5s ease-in-out forwards",t.addEventListener("animationend",(function(){t.remove()})))}function b({status:n,star:r}){s=!1,"win"===n?(e.emit("levelWin",{level:9,star:r}),function(t,n){document.querySelector("#settings").removeEventListener("click",y);const r=document.createElement("img");r.setAttribute("src",H["star-filled"]);const o=document.createElement("img");o.setAttribute("src",H["star-unfilled"]);const i=document.createElement("div");i.className="level-popup game-end-container";const a=document.createElement("p");a.className="game-end-level",a.textContent="Level 9";const s=document.createElement("h2");s.className="game-end-title",s.textContent="Congratulations!!";const c=document.createElement("div");c.id="game-end-star-container";for(let e=0;e<3;e++)e<t?c.appendChild(r.cloneNode(!0)):c.appendChild(o.cloneNode(!0));const l=document.createElement("button-container");l.className="level-button-container";const u=document.createElement("button");u.textContent="Next Level!",u.className="level-popup-button",u.addEventListener("click",(function(t){t.preventDefault(),e.emit("load",{page:"levelSelect"})}));const d=document.createElement("img");d.setAttribute("src",H.restart),d.className="restart-button",d.addEventListener("click",(function(){e.emit("load",{page:"level9"})}));const p=document.createElement("img");p.setAttribute("src",H.home),p.className="home-button",p.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),l.appendChild(u),l.appendChild(d),l.appendChild(p),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(l),n.appendChild(i)}(r,t)):function(t){document.querySelector("#settings").removeEventListener("click",y);const n=document.createElement("div");n.className="level-popup game-end-container";const r=document.createElement("p");r.className="game-end-level",r.textContent="Level 9";const o=document.createElement("h2");o.className="game-end-title",o.textContent="Game Over";const i=document.createElement("p");i.id="game-lose-text",i.textContent="Try again?";const a=document.createElement("button-container");a.className="level-button-container";const s=document.createElement("img");s.setAttribute("src",H.restart),s.className="restart-button",s.addEventListener("click",(function(){e.emit("load",{page:"level9"})}));const c=document.createElement("img");c.setAttribute("src",H.home),c.className="home-button",c.addEventListener("click",(function(){e.emit("load",{page:"levelSelect"})})),a.appendChild(s),a.appendChild(c),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n)}(t)}return{load:function(d=!0){window.removeEventListener("click",_),a=0,h=0,s=!0,m(),l=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth,t=document.createElement("div"),t.id="outer-container",setTimeout((function(){null!=t&&(t.style.zIndex="0")}),1e3),function(e){a=0;const t=document.createElement("p");t.textContent=`Strokes: ${a}`,t.id="score-display",e.appendChild(t)}(t),function(t){const n=document.createElement("img");n.setAttribute("src",H["restart-grey"]),n.id="level-restart-button",n.addEventListener("click",(function(){e.emit("load",{page:"level9",makePopup:!1})})),t.appendChild(n)}(t),function(e){const t=document.createElement("img");t.setAttribute("src",H.settings),t.id="settings",t.container=e,t.addEventListener("click",y),e.appendChild(t)}(t),function(e){const t=document.createElement("div");t.id="star-container";const n=document.createElement("img");n.setAttribute("src",H["star-filled"]),n.className="star";const r=document.createElement("img");r.setAttribute("src",H["star-filled"]),r.className="star";const o=document.createElement("img");o.setAttribute("src",H["star-filled"]),o.className="star",t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t)}(t),function(e){const t=f(4,10),o=document.createElement("div");o.id="fraction-container";const i=document.createElement("p");i.textContent=""+n*t,i.id="top-number";const a=document.createElement("hr");a.id="fraction-bar";const s=document.createElement("p");s.textContent=""+r*t,s.id="bottom-number",o.appendChild(i),o.appendChild(a),o.appendChild(s);const c=document.createElement("equal-sign");c.textContent="=",c.id="equal-sign",e.appendChild(c),e.appendChild(o)}(t),function(e){const t=document.createElement("div");t.id="ball-separate-line",e.appendChild(t)}(t),function(e){let t=Date.now();const n=document.createElement("p");n.id="timer",n.textContent="00:00",e.appendChild(n);let r=1e3,o=Date.now()+r;setTimeout((function e(){let i=Date.now()-o,a=parseInt((o-t)/1e3),c=parseInt(a/60);a%=60,a=1===a.toString().length?`0${a}`:`${a}`,c=1===c.toString().length?`0${c}`:`${c}`,n.textContent=`${c}:${a}`,o+=r,s&&setTimeout(e,Math.max(0,r-i))}),r)}(t),document.querySelector("body").appendChild(t);const p=document.createElement("div");p.id="game-container",function(e){const t=document.querySelector("svg")||document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.querySelector("#line")||document.createElementNS("http://www.w3.org/2000/svg","line");n.id="line",n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","0"),n.setAttribute("y1","0");const r=document.querySelector("#dashed-line")||document.createElementNS("http://www.w3.org/2000/svg","line");r.id="dashed-line",r.setAttribute("x1","0"),r.setAttribute("y1","0"),r.setAttribute("x2","0"),r.setAttribute("y1","0"),t.appendChild(n),t.appendChild(r),e.appendChild(t)}(p),t.appendChild(p);const C=p.offsetHeight,E=p.offsetWidth;for(let e=0;e<o.length;e++)c.push(Ce(t,p,o[e],!0));for(let e=0;e<i.length;e++)c.push(Ce(t,p,i[e],!1));c.push(Ee(p,40,40,n)),c.push(Ee(p,40,C-40,r)),c.push(we(p,C/2-5,0,E,10,!0,[1,1])),c.push(we(p,C/6,0,2*E/3,C/30,[1,16])),c.push(we(p,2*C/7,E/4,E/10,C/15,[1,2])),c.push(we(p,C/3,E/2,E/10,C/15,[1,2])),c.push(we(p,C/7,5*E/6,E/10,C/6,[1,1])),c.push(we(p,C-C/6-C/30,0,2*E/3,C/30,[1,16])),c.push(we(p,C/2+C/8,E/8,E/10,C/7)),c.push(we(p,C/2+C/8,E/2,E/10,C/7)),d&&y(t),e.on("ballReleased",v),e.on("gameOver",b),e.on("hitGoal",g)},deleteAllObjects:function(){c.forEach((function(e){e.remove()})),c=[],e.off("ballReleased",v),e.off("hitGoal",g),e.off("gameOver",b)}}})();(()=>{let t="";const n=e=>{switch(t){case"level1":Se.deleteAllObjects();break;case"level2":Ne.deleteAllObjects();break;case"level3":Te.deleteAllObjects();break;case"level4":Ie.deleteAllObjects();break;case"level5":Ae.deleteAllObjects();break;case"level6":Pe.deleteAllObjects();break;case"level7":Le.deleteAllObjects();break;case"level8":Re.deleteAllObjects();break;case"level9":De.deleteAllObjects()}switch("titlePage"===t?X.transition():null!=document.querySelectorAll("body *")&&document.querySelectorAll("body *").forEach((function(e){e.remove()})),e.page){case"titlePage":t="titlePage",history.pushState({pageID:"home"},"home","#home"),X.load();break;case"levelSelect":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),fe.load();break;case"demoLevel":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),be.load();break;case"level1":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Se.load(e.makePopup);break;case"level2":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Ne.load(e.makePopup);break;case"level3":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Te.load(e.makePopup);break;case"level4":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Ie.load(e.makePopup);break;case"level5":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Ae.load(e.makePopup);break;case"level6":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Pe.load(e.makePopup);break;case"level7":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Le.load(e.makePopup);break;case"level8":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),Re.load(e.makePopup);break;case"level9":t=e.page,history.pushState({pageID:e.page},e.page,`#${e.page}`),De.load(e.makePopup);break;default:t="demoLevel",history.pushState({pageID:"demoLevel"},"demoLevel","#demoLevel"),be.load()}};window.onpopstate=function(){null!=history.state&&("home"===history.state.pageID?n({page:"titlePage"}):"demoLevel"===history.state.pageID?n({page:"demoLevel"}):"levelSelect"===history.state.pageID&&n({page:"levelSelect"}))},e.on("load",n)})();var Oe=n(28),qe={};qe.styleTagTransform=de(),qe.setAttributes=se(),qe.insert=ie().bind(null,"head"),qe.domAPI=re(),qe.insertStyleElement=le(),te()(Oe.Z,qe),Oe.Z&&Oe.Z.locals&&Oe.Z.locals,e.emit("load",{page:"titlePage"})})()})();